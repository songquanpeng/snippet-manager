var e=Object.defineProperty,t=Object.assign,n=(t,n,a)=>("symbol"!=typeof n&&(n+=""),n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a);import{c as a,b as r,r as i,m as l,f as s,a as o,A as c,T as m,I as p,M as d,d as h,S as u,e as g,g as E,h as f,i as k,j as b,B as y,k as w,N as v,D as S,L as C,l as x,y as M,n as T,C as I,o as L,P as D,p as N,q as R,_ as z,s as P,t as B,u as j,v as $,w as O,x as A,z as _,E as H,F as U,G as F,H as G}from"./vendor.d91c29a6.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,i)=>{const l=new URL(e,a);if(self[t].moduleMap[l])return n(self[t].moduleMap[l]);const s=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){i(new Error(`Failed to import: ${e}`)),r(o)},onload(){n(self[t].moduleMap[l]),r(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");a({palette:{primary:r,secondary:i}}),a({palette:{primary:{main:"#fbf1d3"},secondary:{main:"#fbf6e3"}}});const J=l((e=>({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:s(e.palette.common.white,.15),"&:hover":{backgroundColor:s(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(3),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:`calc(1em + ${e.spacing(4)}px)`,transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("md")]:{width:"20ch"}},sectionDesktop:{display:"none",[e.breakpoints.up("md")]:{display:"flex"}},sectionMobile:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}},root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},hide:{display:"none"}})));function W(){const e=J(),[t,n]=o.useState(null),[a,r]=o.useState(null),i=Boolean(t),l=Boolean(a),s=e=>{n(e.currentTarget)},S=()=>{r(null)},C=()=>{n(null),S()},x="primary-search-account-menu",M=o.createElement(k,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:x,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:C},o.createElement(b,{onClick:C},"Setting"),o.createElement(b,{onClick:C},"Logout")),T="primary-search-account-menu-mobile",I=o.createElement(k,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:T,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:S},o.createElement(b,null,o.createElement(p,{"aria-label":"show 4 new mails",color:"inherit"},o.createElement(y,{badgeContent:4,color:"secondary"},o.createElement(w,null))),o.createElement("p",null,"Messages")),o.createElement(b,null,o.createElement(p,{"aria-label":"show 11 new notifications",color:"inherit"},o.createElement(y,{badgeContent:11,color:"secondary"},o.createElement(v,null))),o.createElement("p",null,"Notifications")),o.createElement(b,{onClick:s},o.createElement(p,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},o.createElement(E,null)),o.createElement("p",null,"Profile")));return o.createElement("div",{className:e.grow},o.createElement(c,{position:"fixed",className:e.appBar},o.createElement(m,null,o.createElement(p,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer"},o.createElement(d,null)),o.createElement(h,{className:e.title,variant:"h6",noWrap:!0},"Snippet Manager"),o.createElement("div",{className:e.search},o.createElement("div",{className:e.searchIcon},o.createElement(u,null)),o.createElement(g,{placeholder:"Search…",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})),o.createElement("div",{className:e.grow}),o.createElement("div",{className:e.sectionDesktop},o.createElement(p,{edge:"end","aria-label":"account of current user","aria-controls":x,"aria-haspopup":"true",onClick:s,color:"inherit"},o.createElement(E,null))),o.createElement("div",{className:e.sectionMobile},o.createElement(p,{"aria-label":"show more","aria-controls":T,"aria-haspopup":"true",onClick:e=>{r(e.currentTarget)},color:"inherit"},o.createElement(f,null))))),I,M)}const q=240,K=240,Q=64,V=q,X=l((e=>({drawer:{width:V,flexShrink:0},drawerPaper:{width:V},drawerContainer:{overflow:"auto"}})));let Y=[{text:"C++",link:"Cpp"},{text:"Java",link:"Java"},{text:"Python",link:"Python"},{text:"JavaScript",link:"JavaScript"},{text:"Go",link:"Go"}];function Z(){const e=X();return o.createElement(S,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper}},o.createElement(m,null),o.createElement("div",{className:e.drawerContainer},o.createElement(C,null,Y.map(((e,t)=>o.createElement(x,{button:!0,key:e.link,component:M,to:`/tag/${e.link}`},o.createElement(T,null,o.createElement(I,null)),o.createElement(L,{primary:e.text})))))))}const ee=l((e=>({root:{height:"100%",width:K,marginTop:Q,position:"fixed",top:0,left:q}})));let te,ne=[{text:"通过 window 对象使函数在页面可用",link:"temp-link-1"},{text:"通过构建 HTML 文本来创建并插入元素",link:"temp-link-2"},{text:"通过 API 来创建元素",link:"temp-link-3"},{text:"复制文字到剪切板",link:"temp-link-4"},{text:"打开新的页面",link:"temp-link-5"}];function ae(){const e=ee();return o.createElement(D,{className:e.root},o.createElement(C,null,ne.map(((e,t)=>o.createElement(x,{button:!0,key:e.link,component:M,to:`/snippet/${e.link}`},o.createElement(L,{primary:e.text}))))))}const re=o.forwardRef((function(e,n){return o.createElement(N,t({direction:"up",ref:n},e))}));class ie extends o.Component{constructor(e){super(e),n(this,"delete",(async()=>{this.message("Snippet has been deleted.")})),n(this,"copy",(async()=>{try{await navigator.clipboard.writeText(this.state.snippet.code),this.message("Snippet copied.")}catch(e){this.message(e)}})),n(this,"onChange",(e=>{let t=e;localStorage.setItem("editorContent",t),this.setState({draft:t})})),n(this,"snippet2draft",(e=>`# ${e.title}\nTags: ${e.tag}\n\n## Code\n\`\`\` ${e.language}\n${e.code}\n\`\`\`\n\n## Description\n${e.description}`)),n(this,"draft2snippet",(e=>{let t=e.split("\n"),n=0,a=0;for(let i=2;i<t.length;i++)if(t[i].trim().startsWith("```")){if(0!==n){a=i;break}n=i}let r=0;for(let i=a+1;i<t.length;i++)if(t[i].trim()){r=t[i].trim().startsWith("#")?i+1:i;break}return{language:t[n].substr(3).trim(),title:t[0].substr(1).trim(),code:t.slice(n+1,a).join("\n"),description:t.slice(r).join("\n"),tag:t[1].split(" ").slice(1).join(" ")}})),n(this,"showEditorDialog",(()=>{this.setState({draft:this.snippet2draft(this.state.snippet),showEditor:!0})})),n(this,"closeEditorDialog",(()=>{this.setState({showEditor:!1})})),n(this,"applyChange",(async()=>{let e=this.draft2snippet(this.state.draft),t=this.state.snippet.description!==e.description;this.setState({snippet:e}),t&&this.setState({renderedDescription:R(e.description)}),this.message("Snippet has been updated.")})),this.state={loading:!1,theme:"solarized_light",fontSize:18,snippet:{language:"javascript",title:"通过 API 来创建元素",code:'let hiddenTextArea = document.createElement(\'textarea\');\nhiddenTextArea.setAttribute("id", "hiddenTextArea");\nhiddenTextArea.style.cssText = "display:hidden;";',description:"利用 API 来创建元素，除此之外还可以通过构建 HTML 文本来创建元素。",tag:"浏览器脚本 HTML API"},draft:"",showSnackbar:!1,showEditor:!1,snackMessage:"Hi",renderedDescription:""}}async componentDidMount(){this.setState({renderedDescription:R(this.state.snippet.description)}),this.loadEditorConfig()}loadEditorConfig(){let e=localStorage.getItem("theme");e||(e=this.state.theme);let t=localStorage.getItem("fontSize");t=parseInt(t),t||(t=this.state.fontSize),this.setState({theme:e,fontSize:t})}renderEditor(){return o.createElement(z,{style:{width:"100%",height:"100%"},mode:"markdown",theme:this.state.theme,name:"editor",onChange:this.onChange,value:this.state.draft,fontSize:this.state.fontSize,setOptions:{useWorker:!1}})}message(e){this.setState({showSnackbar:!0,snackMessage:e}),clearTimeout(te),te=setTimeout((()=>{this.setState({showSnackbar:!1})}),3e3)}renderSnackbar(){return o.createElement(P,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showSnackbar,message:this.state.snackMessage})}renderTopPanel(){return o.createElement("div",null,o.createElement(B,{variant:"contained",color:"secondary",onClick:this.delete,style:{marginRight:8,marginBottom:8}},"Delete Snippet"),o.createElement(B,{variant:"contained",style:{marginRight:8,marginBottom:8},onClick:this.showEditorDialog},"Edit Snippet"),o.createElement(B,{variant:"contained",color:"primary",onClick:this.copy,style:{marginRight:8,marginBottom:8}},"Copy Code"))}renderEditorDialog(){return o.createElement(j,{fullScreen:!0,open:this.state.showEditor,onClose:this.closeEditorDialog,TransitionComponent:re},o.createElement(c,{position:"relative",style:{background:"#fbf1d3",boxShadow:"none"}},o.createElement(m,null,o.createElement(p,{edge:"start",color:"inherit",onClick:this.closeEditorDialog,"aria-label":"close"},o.createElement($,{style:{fill:"#000"}})),o.createElement(p,{"aria-label":"save",color:"inherit",onClick:this.applyChange},o.createElement(O,{style:{fill:"#000"}})))),this.renderEditor())}render(){return o.createElement(o.Fragment,null,this.renderTopPanel(),o.createElement(D,{style:{padding:16}},o.createElement(h,{variant:"h4",gutterBottom:!0},this.state.snippet.title),o.createElement(A,{className:this.state.snippet.language},this.state.snippet.code),o.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.renderedDescription}})),this.renderSnackbar(),this.renderEditorDialog())}}const le=l((e=>({root:{display:"flex"},content:{padding:e.spacing(3),marginLeft:K,width:"100%",height:"100%"}})));function se(){const e=le();return o.createElement("div",{className:e.root},o.createElement(_,null),o.createElement(W,null),o.createElement(Z,null),o.createElement(ae,null),o.createElement("main",{className:e.content},o.createElement(m,null),o.createElement(ie,null)))}const oe=()=>o.createElement("div",null,"404"),ce=[{path:"/",element:o.createElement(se,null),children:[{path:"404",element:o.createElement(oe,null)},{path:"/",element:o.createElement(ie,null)},{path:"*",element:o.createElement(H,{to:"/404"})}]}],me=()=>{o.useEffect((()=>{const e=document.getElementById("ipl-progress-indicator");e&&(e.classList.add("available"),setTimeout((()=>{e.outerHTML=""}),20))}),[]);const e=U(ce);return o.createElement(o.Fragment,null,e)};F.render(o.createElement(G,null,o.createElement(o.StrictMode,null,o.createElement(me,null))),document.getElementById("root"));
