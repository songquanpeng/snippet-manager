(this["webpackJsonpsnippet-manager"]=this["webpackJsonpsnippet-manager"]||[]).push([[0],{143:function(e,t,n){},390:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),s=n.n(i),c=(n(143),n(8)),o=n(450),l=n(119),d=n(102),p=n.n(d),u=n(103),j=n.n(u),h=Object(l.a)({palette:{primary:p.a,secondary:j.a}}),b=(Object(l.a)({palette:{primary:{main:"#fbf1d3"},secondary:{main:"#fbf6e3"}}}),n(19)),O=n.n(b),g=n(32),f=n(17),m=n(430),x=n(445),v=n(439),y=n(443),k=n(451),S=n(444),w=n(449),T=n(447),C=n(448),E=n(446),I=n(27),N=n(121),D=n(435),_=n(436),A=n(437),L=n(106),G=n.n(L),M=n(107),z=n.n(M),P=n(72),B=n.n(P),R=n(438),W=n(108),H=n.n(W),J=n(51),F=n(109),K=n.n(F),Y=n(454),U=n(110),q=n.n(U),Q=n(14),V=function(e,t){switch(t.type){case"SET_SETTING_DIALOG":return{open:t.payload};default:return e}},X=function(e,t){switch(t.type){case"SET_TOKEN":return{token:t.payload};default:return e}},Z=n(18),$=function(e){return function(t,n){var a={};for(var r in e)a[r]=e[r](t[r],n);return a}}({SettingDialog:V,Token:X,Setting:function(e,t){switch(t.type){case"SET_SETTING":return Object(Z.a)({},t.payload);default:return e}},Toast:function(e,t){switch(t.type){case"SHOW_TOAST":return Object(Z.a)(Object(Z.a)(Object(Z.a)({},e),t.payload),{},{open:!0});case"CLOSE_TOAST":return Object(Z.a)(Object(Z.a)({},e),{},{open:!1});default:return e}}}),ee=240,te=240,ne=64,ae=1e3,re="error",ie="info",se="success",ce=n(2),oe={SettingDialog:{open:!1},Token:"",Setting:{username:"",password:"",server:"https://code-snippet-manager.herokuapp.com"},Toast:{open:!1,message:"",duration:5e3,type:ie}},le=Object(a.createContext)(oe),de=function(e){var t=e.children,n=Object(a.useReducer)($,oe),r=Object(f.a)(n,2),i=r[0],s=r[1];return Object(ce.jsx)(le.Provider,{value:[i,s],children:t})};var pe=Object(m.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(I.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(I.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Q.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Q.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(I.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(I.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(I.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},hide:{display:"none"}}}));function ue(){var e=Object(a.useContext)(le),t=Object(f.a)(e,2),n=(t[0],t[1]),i=pe(),s=r.a.useState(null),c=Object(f.a)(s,2),o=c[0],l=c[1],d=r.a.useState(null),p=Object(f.a)(d,2),u=p[0],j=p[1],h=Boolean(o),b=Boolean(u),O=function(e){l(e.currentTarget)},g=function(){j(null)},m=function(){l(null),g()},x="primary-search-account-menu",y=Object(ce.jsxs)(N.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:x,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:h,onClose:m,children:[Object(ce.jsx)(D.a,{onClick:function(){m(),n({type:"SET_SETTING_DIALOG",payload:!0})},children:"Setting"}),Object(ce.jsx)(D.a,{onClick:m,children:"Logout"})]}),k="primary-search-account-menu-mobile",S=Object(ce.jsxs)(N.a,{anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},id:k,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:g,children:[Object(ce.jsxs)(D.a,{children:[Object(ce.jsx)(_.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(ce.jsx)(A.a,{badgeContent:4,color:"secondary",children:Object(ce.jsx)(G.a,{})})}),Object(ce.jsx)("p",{children:"Messages"})]}),Object(ce.jsxs)(D.a,{children:[Object(ce.jsx)(_.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(ce.jsx)(A.a,{badgeContent:11,color:"secondary",children:Object(ce.jsx)(z.a,{})})}),Object(ce.jsx)("p",{children:"Notifications"})]}),Object(ce.jsxs)(D.a,{onClick:O,children:[Object(ce.jsx)(_.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(ce.jsx)(B.a,{})}),Object(ce.jsx)("p",{children:"Profile"})]})]});return Object(ce.jsxs)("div",{className:i.grow,children:[Object(ce.jsx)(R.a,{position:"fixed",className:i.appBar,children:Object(ce.jsxs)(v.a,{children:[Object(ce.jsx)(_.a,{edge:"start",className:i.menuButton,color:"inherit","aria-label":"open drawer",children:Object(ce.jsx)(H.a,{})}),Object(ce.jsx)(J.a,{className:i.title,variant:"h6",noWrap:!0,children:"Snippet Manager"}),Object(ce.jsxs)("div",{className:i.search,children:[Object(ce.jsx)("div",{className:i.searchIcon,children:Object(ce.jsx)(K.a,{})}),Object(ce.jsx)(Y.a,{placeholder:"Search\u2026",classes:{root:i.inputRoot,input:i.inputInput},inputProps:{"aria-label":"search"}})]}),Object(ce.jsx)("div",{className:i.grow}),Object(ce.jsx)("div",{className:i.sectionDesktop,children:Object(ce.jsx)(_.a,{edge:"end","aria-label":"account of current user","aria-controls":x,"aria-haspopup":"true",onClick:O,color:"inherit",children:Object(ce.jsx)(B.a,{})})}),Object(ce.jsx)("div",{className:i.sectionMobile,children:Object(ce.jsx)(_.a,{"aria-label":"show more","aria-controls":k,"aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(ce.jsx)(q.a,{})})})]})}),S,y]})}var je=n(434),he=n(391),be=n(441),Oe=n(442),ge=n(111),fe=n.n(ge),me=n(440),xe=n(34),ve=ee,ye=Object(m.a)((function(e){return{drawer:{width:ve,flexShrink:0},drawerPaper:{width:ve},drawerContainer:{overflow:"auto"}}})),ke=[{text:"C++",link:"Cpp"},{text:"Java",link:"Java"},{text:"Python",link:"Python"},{text:"JavaScript",link:"JavaScript"},{text:"Go",link:"Go"}];function Se(){var e=ye();return Object(ce.jsxs)(me.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},children:[Object(ce.jsx)(v.a,{}),Object(ce.jsx)("div",{className:e.drawerContainer,children:Object(ce.jsx)(je.a,{children:ke.map((function(e,t){return Object(ce.jsxs)(he.a,{button:!0,component:xe.b,to:"/tag/".concat(e.link),children:[Object(ce.jsx)(be.a,{children:Object(ce.jsx)(fe.a,{})}),Object(ce.jsx)(Oe.a,{primary:e.text})]},e.link)}))})})]})}var we=n(74),Te=Object(m.a)((function(e){return{root:{height:"100%",width:te,marginTop:ne,position:"fixed",top:0,left:ee}}})),Ce=[{text:"\u901a\u8fc7 window \u5bf9\u8c61\u4f7f\u51fd\u6570\u5728\u9875\u9762\u53ef\u7528",link:"temp-link-1"},{text:"\u901a\u8fc7\u6784\u5efa HTML \u6587\u672c\u6765\u521b\u5efa\u5e76\u63d2\u5165\u5143\u7d20",link:"temp-link-2"},{text:"\u901a\u8fc7 API \u6765\u521b\u5efa\u5143\u7d20",link:"temp-link-3"},{text:"\u590d\u5236\u6587\u5b57\u5230\u526a\u5207\u677f",link:"temp-link-4"},{text:"\u6253\u5f00\u65b0\u7684\u9875\u9762",link:"temp-link-5"}];function Ee(){var e=Te();return Object(ce.jsx)(we.a,{className:e.root,children:Object(ce.jsx)(je.a,{children:Ce.map((function(e,t){return Object(ce.jsx)(he.a,{button:!0,component:xe.b,to:"/snippet/".concat(e.link),children:Object(ce.jsx)(Oe.a,{primary:e.text})},e.link)}))})})}var Ie=n(112),Ne=n(113),De=n(122),_e=n(120),Ae=n(114),Le=n.n(Ae),Ge=(n(157),n(158),n(159),n(453)),Me=n(116),ze=n.n(Me),Pe=n(117),Be=n.n(Pe),Re=n(392),We=n(115),He=n.n(We),Je=n(73),Fe=n.n(Je),Ke=void 0,Ye=r.a.forwardRef((function(e,t){return Object(ce.jsx)(Re.a,Object(Z.a)({direction:"up",ref:t},e))})),Ue=function(e){Object(De.a)(n,e);var t=Object(_e.a)(n);function n(e){var a;return Object(Ie.a)(this,n),(a=t.call(this,e)).delete=Object(g.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.message("Snippet has been deleted.");case 1:case"end":return e.stop()}}),e)}))),a.copy=Object(g.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(a.state.snippet.code);case 3:a.message("Snippet copied."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a.message(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),a.onChange=function(e){var t=e;localStorage.setItem("editorContent",t),a.setState({draft:t})},a.snippet2draft=function(e){return"# ".concat(e.title,"\nTags: ").concat(e.tag,"\n\n## Code\n``` ").concat(e.language,"\n").concat(e.code,"\n```\n\n## Description\n").concat(e.description)},a.draft2snippet=function(e){for(var t=e.split("\n"),n=0,a=0,r=2;r<t.length;r++)if(t[r].trim().startsWith("```")){if(0!==n){a=r;break}n=r}for(var i=0,s=a+1;s<t.length;s++)if(t[s].trim()){i=t[s].trim().startsWith("#")?s+1:s;break}return{language:t[n].substr(3).trim(),title:t[0].substr(1).trim(),code:t.slice(n+1,a).join("\n"),description:t.slice(i).join("\n"),tag:t[1].split(" ").slice(1).join(" ")}},a.showEditorDialog=function(){a.setState({draft:a.snippet2draft(a.state.snippet),showEditor:!0})},a.closeEditorDialog=function(){a.setState({showEditor:!1})},a.applyChange=Object(g.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.draft2snippet(a.state.draft),n=a.state.snippet.description!==t.description,a.setState({snippet:t}),n&&a.setState({renderedDescription:Fe()(t.description)}),a.message("Snippet has been updated.");case 5:case"end":return e.stop()}}),e)}))),a.state={loading:!1,theme:"solarized_light",fontSize:18,snippet:{language:"javascript",title:"\u901a\u8fc7 API \u6765\u521b\u5efa\u5143\u7d20",code:'let hiddenTextArea = document.createElement(\'textarea\');\nhiddenTextArea.setAttribute("id", "hiddenTextArea");\nhiddenTextArea.style.cssText = "display:hidden;";',description:"\u5229\u7528 API \u6765\u521b\u5efa\u5143\u7d20\uff0c\u9664\u6b64\u4e4b\u5916\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6784\u5efa HTML \u6587\u672c\u6765\u521b\u5efa\u5143\u7d20\u3002",tag:"\u6d4f\u89c8\u5668\u811a\u672c HTML API"},draft:"",showSnackbar:!1,showEditor:!1,snackMessage:"Hi",renderedDescription:""},a}return Object(Ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({renderedDescription:Fe()(this.state.snippet.description)}),this.loadEditorConfig();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEditorConfig",value:function(){var e=localStorage.getItem("theme");e||(e=this.state.theme);var t=localStorage.getItem("fontSize");(t=parseInt(t))||(t=this.state.fontSize),this.setState({theme:e,fontSize:t})}},{key:"renderEditor",value:function(){return Object(ce.jsx)(Le.a,{style:{width:"100%",height:"100%"},mode:"markdown",theme:this.state.theme,name:"editor",onChange:this.onChange,value:this.state.draft,fontSize:this.state.fontSize,setOptions:{useWorker:!1}})}},{key:"message",value:function(e){var t=this;this.setState({showSnackbar:!0,snackMessage:e}),clearTimeout(Ke),Ke=setTimeout((function(){t.setState({showSnackbar:!1})}),3e3)}},{key:"renderSnackbar",value:function(){return Object(ce.jsx)(Ge.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showSnackbar,message:this.state.snackMessage})}},{key:"renderTopPanel",value:function(){return Object(ce.jsxs)("div",{children:[Object(ce.jsx)(y.a,{variant:"contained",color:"secondary",onClick:this.delete,style:{marginRight:8,marginBottom:8},children:"Delete Snippet"}),Object(ce.jsx)(y.a,{variant:"contained",style:{marginRight:8,marginBottom:8},onClick:this.showEditorDialog,children:"Edit Snippet"}),Object(ce.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.copy,style:{marginRight:8,marginBottom:8},children:"Copy Code"})]})}},{key:"renderEditorDialog",value:function(){return Object(ce.jsxs)(S.a,{fullScreen:!0,open:this.state.showEditor,onClose:this.closeEditorDialog,TransitionComponent:Ye,children:[Object(ce.jsx)(R.a,{position:"relative",style:{background:"#fbf1d3",boxShadow:"none"},children:Object(ce.jsxs)(v.a,{children:[Object(ce.jsx)(_.a,{edge:"start",color:"inherit",onClick:this.closeEditorDialog,"aria-label":"close",children:Object(ce.jsx)(ze.a,{style:{fill:"#000"}})}),Object(ce.jsx)(_.a,{"aria-label":"save",color:"inherit",onClick:this.applyChange,children:Object(ce.jsx)(Be.a,{style:{fill:"#000"}})})]})}),this.renderEditor()]})}},{key:"render",value:function(){return Object(ce.jsxs)(ce.Fragment,{children:[this.renderTopPanel(),Object(ce.jsxs)(we.a,{style:{padding:16},children:[Object(ce.jsx)(J.a,{variant:"h4",gutterBottom:!0,children:this.state.snippet.title}),Object(ce.jsx)(He.a,{className:this.state.snippet.language,children:this.state.snippet.code}),Object(ce.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.renderedDescription}})]}),this.renderSnackbar(),this.renderEditorDialog()]})}}]),n}(r.a.Component),qe=function(e){var t=Object(a.useState)(e),n=Object(f.a)(t,2),r=n[0],i=n[1];return[r,i,function(e){"server"===e.target.name&&e.target.value.endsWith("/")&&(e.target.value=e.target.value.slice(0,-1)),i(Object(Z.a)(Object(Z.a)({},r),{},Object(I.a)({},e.target.name,e.target.value)))}]},Qe=n(118),Ve=n.n(Qe),Xe=function(){var e=Object(g.a)(O.a.mark((function e(t,n){var a,r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ve.a.post("".concat(t.server,"/auth"),{username:t.username,password:t.password});case 3:if(a=e.sent,(r=a.data).code!==ae){e.next=11;break}return i=r.data.token,n({type:"SET_TOKEN",payload:i}),e.abrupt("return",[!0,""]);case 11:return e.abrupt("return",[!1,"Failed to refresh token: code ".concat(r.code,".")]);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[!1,"Failed to refresh token: ".concat(e.t0.message,".")]);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Ze=n(452);function $e(e){return Object(ce.jsx)(Ze.a,Object(Z.a)({elevation:6,variant:"filled"},e))}function et(){var e=Object(a.useContext)(le),t=Object(f.a)(e,2),n=t[0],r=t[1],i=function(e,t){"clickaway"!==t&&r({type:"CLOSE_TOAST",payload:{}})};return Object(ce.jsx)(Ge.a,{open:n.Toast.open,autoHideDuration:n.Toast.duration,onClose:i,children:Object(ce.jsx)($e,{onClose:i,severity:n.Toast.type,children:n.Toast.message})})}var tt=Object(m.a)((function(e){return{root:{display:"flex"},content:{padding:e.spacing(3),marginLeft:te,width:"100%",height:"100%"}}}));var nt=function(){var e=Object(a.useContext)(le),t=Object(f.a)(e,2),n=t[0],r=t[1],i=qe(n.Setting),s=Object(f.a)(i,3),c=s[0],o=s[1],l=s[2];Object(a.useEffect)((function(){!function(e){var t=localStorage.getItem("username"),n=localStorage.getItem("password"),a=localStorage.getItem("server");t&&n&&a?(e({type:"SET_SETTING",payload:{username:t,password:n,server:a}}),console.log("Setting is loaded.")):e({type:"SET_SETTING_DIALOG",payload:!0})}(r)}),[]),Object(a.useEffect)((function(){o(n.Setting)}),[n]);var d=tt();return Object(ce.jsxs)("div",{className:d.root,children:[Object(ce.jsx)(x.a,{}),Object(ce.jsx)(ue,{}),Object(ce.jsx)(Se,{}),Object(ce.jsx)(Ee,{}),Object(ce.jsxs)("main",{className:d.content,children:[Object(ce.jsx)(v.a,{}),Object(ce.jsx)(Ue,{})]}),Object(ce.jsxs)(S.a,{open:n.SettingDialog.open,onClose:function(){r({type:"SET_SETTING_DIALOG",payload:!1})},"aria-labelledby":"form-dialog-title",children:[Object(ce.jsx)(E.a,{id:"form-dialog-title",children:"Setting"}),Object(ce.jsxs)(T.a,{children:[Object(ce.jsx)(C.a,{children:"Tips: you can use a localhost server."}),Object(ce.jsx)(k.a,{margin:"dense",name:"username",label:"Username",type:"text",value:c.username,onChange:l,fullWidth:!0}),Object(ce.jsx)(k.a,{margin:"dense",name:"password",label:"Password",type:"password",value:c.password,onChange:l,fullWidth:!0}),Object(ce.jsx)(k.a,{margin:"dense",name:"server",label:"Server Address",type:"url",value:c.server,onChange:l,fullWidth:!0})]}),Object(ce.jsxs)(w.a,{children:[Object(ce.jsx)(y.a,{onClick:Object(g.a)(O.a.mark((function e(){var t,n,a,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(c,r);case 2:t=e.sent,n=Object(f.a)(t,2),a=n[0],i=n[1],s=re,a&&(i="Your setting is okay.",s=se),r({type:"SHOW_TOAST",payload:{message:i,type:s,duration:a?3e3:6e3}});case 9:case"end":return e.stop()}}),e)}))),color:"primary",children:"Test"}),Object(ce.jsx)(y.a,{onClick:function(){!function(e,t){t({type:"SET_SETTING_DIALOG",payload:!1});for(var n=0,a=Object.entries(e);n<a.length;n++){var r=Object(f.a)(a[n],2),i=r[0],s=r[1];localStorage.setItem(i,s)}t({type:"SET_SETTING",payload:e})}(c,r),r({type:"SHOW_TOAST",payload:{message:"Your settings have been saved in local storage.",type:se,duration:3e3}})},color:"primary",children:"Save"})]})]}),Object(ce.jsx)(et,{})]})},at=function(){return Object(ce.jsx)("div",{children:"404"})},rt=[{path:"/",element:Object(ce.jsx)(nt,{}),children:[{path:"404",element:Object(ce.jsx)(at,{})},{path:"/",element:Object(ce.jsx)(Ue,{})},{path:"*",element:Object(ce.jsx)(c.a,{to:"/404"})}]}],it=function(){Object(a.useEffect)((function(){var e=document.getElementById("ipl-progress-indicator");e&&(e.classList.add("available"),setTimeout((function(){e.outerHTML=""}),20))}),[]);var e=Object(c.h)(rt);return Object(ce.jsx)(de,{children:Object(ce.jsx)(o.a,{theme:h,children:e})})};s.a.render(Object(ce.jsx)(xe.a,{children:Object(ce.jsx)(r.a.StrictMode,{children:Object(ce.jsx)(it,{})})}),document.getElementById("root"))}},[[390,1,2]]]);
//# sourceMappingURL=main.a6802b5d.chunk.js.map