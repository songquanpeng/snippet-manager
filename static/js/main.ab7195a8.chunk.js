(this["webpackJsonpsnippet-manager"]=this["webpackJsonpsnippet-manager"]||[]).push([[0],{141:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),c=n.n(i),s=(n(141),n(8)),o=n(449),l=n(116),d=n(99),p=n.n(d),u=n(100),j=n.n(u),h=Object(l.a)({palette:{primary:p.a,secondary:j.a}}),b=(Object(l.a)({palette:{primary:{main:"#fbf1d3"},secondary:{main:"#fbf6e3"}}}),n(17)),g=n.n(b),O=n(31),f=n(19),m=n(429),x=n(444),v=n(438),k=n(442),y=n(450),S=n(443),w=n(448),T=n(446),E=n(447),C=n(445),I=n(26),N=n(118),D=n(434),_=n(435),G=n(436),L=n(103),M=n.n(L),A=n(104),z=n.n(A),P=n(71),B=n.n(P),R=n(437),W=n(105),H=n.n(W),J=n(48),F=n(106),K=n.n(F),U=n(452),q=n(107),Q=n.n(q),V=n(14),X=function(e,t){switch(t.type){case"SET_SETTING_DIALOG":return{open:t.payload};default:return e}},Y=function(e,t){switch(t.type){case"SET_TOKEN":return{token:t.payload};default:return e}},Z=n(39),$=function(e){return function(t,n){var a={};for(var r in e)a[r]=e[r](t[r],n);return a}}({SettingDialog:X,Token:Y,Setting:function(e,t){switch(t.type){case"SET_SETTING":return Object(Z.a)({},t.payload);default:return e}}}),ee=n(3),te={SettingDialog:!1,Token:"",Setting:{username:"",password:"",server:""}},ne=Object(a.createContext)(te),ae=function(e){var t=e.children,n=Object(a.useReducer)($,te),r=Object(f.a)(n,2),i=r[0],c=r[1];return Object(ee.jsx)(ne.Provider,{value:[i,c],children:t})};var re=Object(m.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(I.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(I.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(V.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(V.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(I.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(I.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(I.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},hide:{display:"none"}}}));function ie(){var e=Object(a.useContext)(ne),t=Object(f.a)(e,2),n=(t[0],t[1]),i=re(),c=r.a.useState(null),s=Object(f.a)(c,2),o=s[0],l=s[1],d=r.a.useState(null),p=Object(f.a)(d,2),u=p[0],j=p[1],h=Boolean(o),b=Boolean(u),g=function(e){l(e.currentTarget)},O=function(){j(null)},m=function(){l(null),O()},x="primary-search-account-menu",k=Object(ee.jsxs)(N.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:x,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:h,onClose:m,children:[Object(ee.jsx)(D.a,{onClick:function(){m(),n({type:"SET_SETTING_DIALOG",payload:!0})},children:"Setting"}),Object(ee.jsx)(D.a,{onClick:m,children:"Logout"})]}),y="primary-search-account-menu-mobile",S=Object(ee.jsxs)(N.a,{anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},id:y,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:O,children:[Object(ee.jsxs)(D.a,{children:[Object(ee.jsx)(_.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(ee.jsx)(G.a,{badgeContent:4,color:"secondary",children:Object(ee.jsx)(M.a,{})})}),Object(ee.jsx)("p",{children:"Messages"})]}),Object(ee.jsxs)(D.a,{children:[Object(ee.jsx)(_.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(ee.jsx)(G.a,{badgeContent:11,color:"secondary",children:Object(ee.jsx)(z.a,{})})}),Object(ee.jsx)("p",{children:"Notifications"})]}),Object(ee.jsxs)(D.a,{onClick:g,children:[Object(ee.jsx)(_.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(ee.jsx)(B.a,{})}),Object(ee.jsx)("p",{children:"Profile"})]})]});return Object(ee.jsxs)("div",{className:i.grow,children:[Object(ee.jsx)(R.a,{position:"fixed",className:i.appBar,children:Object(ee.jsxs)(v.a,{children:[Object(ee.jsx)(_.a,{edge:"start",className:i.menuButton,color:"inherit","aria-label":"open drawer",children:Object(ee.jsx)(H.a,{})}),Object(ee.jsx)(J.a,{className:i.title,variant:"h6",noWrap:!0,children:"Snippet Manager"}),Object(ee.jsxs)("div",{className:i.search,children:[Object(ee.jsx)("div",{className:i.searchIcon,children:Object(ee.jsx)(K.a,{})}),Object(ee.jsx)(U.a,{placeholder:"Search\u2026",classes:{root:i.inputRoot,input:i.inputInput},inputProps:{"aria-label":"search"}})]}),Object(ee.jsx)("div",{className:i.grow}),Object(ee.jsx)("div",{className:i.sectionDesktop,children:Object(ee.jsx)(_.a,{edge:"end","aria-label":"account of current user","aria-controls":x,"aria-haspopup":"true",onClick:g,color:"inherit",children:Object(ee.jsx)(B.a,{})})}),Object(ee.jsx)("div",{className:i.sectionMobile,children:Object(ee.jsx)(_.a,{"aria-label":"show more","aria-controls":y,"aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(ee.jsx)(Q.a,{})})})]})}),S,k]})}var ce=n(433),se=n(390),oe=n(440),le=n(441),de=n(108),pe=n.n(de),ue=n(439),je=n(33),he=240,be=240,ge=64,Oe=1e3,fe=he,me=Object(m.a)((function(e){return{drawer:{width:fe,flexShrink:0},drawerPaper:{width:fe},drawerContainer:{overflow:"auto"}}})),xe=[{text:"C++",link:"Cpp"},{text:"Java",link:"Java"},{text:"Python",link:"Python"},{text:"JavaScript",link:"JavaScript"},{text:"Go",link:"Go"}];function ve(){var e=me();return Object(ee.jsxs)(ue.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},children:[Object(ee.jsx)(v.a,{}),Object(ee.jsx)("div",{className:e.drawerContainer,children:Object(ee.jsx)(ce.a,{children:xe.map((function(e,t){return Object(ee.jsxs)(se.a,{button:!0,component:je.b,to:"/tag/".concat(e.link),children:[Object(ee.jsx)(oe.a,{children:Object(ee.jsx)(pe.a,{})}),Object(ee.jsx)(le.a,{primary:e.text})]},e.link)}))})})]})}var ke=n(73),ye=Object(m.a)((function(e){return{root:{height:"100%",width:be,marginTop:ge,position:"fixed",top:0,left:he}}})),Se=[{text:"\u901a\u8fc7 window \u5bf9\u8c61\u4f7f\u51fd\u6570\u5728\u9875\u9762\u53ef\u7528",link:"temp-link-1"},{text:"\u901a\u8fc7\u6784\u5efa HTML \u6587\u672c\u6765\u521b\u5efa\u5e76\u63d2\u5165\u5143\u7d20",link:"temp-link-2"},{text:"\u901a\u8fc7 API \u6765\u521b\u5efa\u5143\u7d20",link:"temp-link-3"},{text:"\u590d\u5236\u6587\u5b57\u5230\u526a\u5207\u677f",link:"temp-link-4"},{text:"\u6253\u5f00\u65b0\u7684\u9875\u9762",link:"temp-link-5"}];function we(){var e=ye();return Object(ee.jsx)(ke.a,{className:e.root,children:Object(ee.jsx)(ce.a,{children:Se.map((function(e,t){return Object(ee.jsx)(se.a,{button:!0,component:je.b,to:"/snippet/".concat(e.link),children:Object(ee.jsx)(le.a,{primary:e.text})},e.link)}))})})}var Te=n(109),Ee=n(110),Ce=n(119),Ie=n(117),Ne=n(111),De=n.n(Ne),_e=(n(155),n(156),n(157),n(451)),Ge=n(113),Le=n.n(Ge),Me=n(114),Ae=n.n(Me),ze=n(391),Pe=n(112),Be=n.n(Pe),Re=n(72),We=n.n(Re),He=void 0,Je=r.a.forwardRef((function(e,t){return Object(ee.jsx)(ze.a,Object(Z.a)({direction:"up",ref:t},e))})),Fe=function(e){Object(Ce.a)(n,e);var t=Object(Ie.a)(n);function n(e){var a;return Object(Te.a)(this,n),(a=t.call(this,e)).delete=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.message("Snippet has been deleted.");case 1:case"end":return e.stop()}}),e)}))),a.copy=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(a.state.snippet.code);case 3:a.message("Snippet copied."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a.message(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),a.onChange=function(e){var t=e;localStorage.setItem("editorContent",t),a.setState({draft:t})},a.snippet2draft=function(e){return"# ".concat(e.title,"\nTags: ").concat(e.tag,"\n\n## Code\n``` ").concat(e.language,"\n").concat(e.code,"\n```\n\n## Description\n").concat(e.description)},a.draft2snippet=function(e){for(var t=e.split("\n"),n=0,a=0,r=2;r<t.length;r++)if(t[r].trim().startsWith("```")){if(0!==n){a=r;break}n=r}for(var i=0,c=a+1;c<t.length;c++)if(t[c].trim()){i=t[c].trim().startsWith("#")?c+1:c;break}return{language:t[n].substr(3).trim(),title:t[0].substr(1).trim(),code:t.slice(n+1,a).join("\n"),description:t.slice(i).join("\n"),tag:t[1].split(" ").slice(1).join(" ")}},a.showEditorDialog=function(){a.setState({draft:a.snippet2draft(a.state.snippet),showEditor:!0})},a.closeEditorDialog=function(){a.setState({showEditor:!1})},a.applyChange=Object(O.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.draft2snippet(a.state.draft),n=a.state.snippet.description!==t.description,a.setState({snippet:t}),n&&a.setState({renderedDescription:We()(t.description)}),a.message("Snippet has been updated.");case 5:case"end":return e.stop()}}),e)}))),a.state={loading:!1,theme:"solarized_light",fontSize:18,snippet:{language:"javascript",title:"\u901a\u8fc7 API \u6765\u521b\u5efa\u5143\u7d20",code:'let hiddenTextArea = document.createElement(\'textarea\');\nhiddenTextArea.setAttribute("id", "hiddenTextArea");\nhiddenTextArea.style.cssText = "display:hidden;";',description:"\u5229\u7528 API \u6765\u521b\u5efa\u5143\u7d20\uff0c\u9664\u6b64\u4e4b\u5916\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6784\u5efa HTML \u6587\u672c\u6765\u521b\u5efa\u5143\u7d20\u3002",tag:"\u6d4f\u89c8\u5668\u811a\u672c HTML API"},draft:"",showSnackbar:!1,showEditor:!1,snackMessage:"Hi",renderedDescription:""},a}return Object(Ee.a)(n,[{key:"componentDidMount",value:function(){var e=Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({renderedDescription:We()(this.state.snippet.description)}),this.loadEditorConfig();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEditorConfig",value:function(){var e=localStorage.getItem("theme");e||(e=this.state.theme);var t=localStorage.getItem("fontSize");(t=parseInt(t))||(t=this.state.fontSize),this.setState({theme:e,fontSize:t})}},{key:"renderEditor",value:function(){return Object(ee.jsx)(De.a,{style:{width:"100%",height:"100%"},mode:"markdown",theme:this.state.theme,name:"editor",onChange:this.onChange,value:this.state.draft,fontSize:this.state.fontSize,setOptions:{useWorker:!1}})}},{key:"message",value:function(e){var t=this;this.setState({showSnackbar:!0,snackMessage:e}),clearTimeout(He),He=setTimeout((function(){t.setState({showSnackbar:!1})}),3e3)}},{key:"renderSnackbar",value:function(){return Object(ee.jsx)(_e.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showSnackbar,message:this.state.snackMessage})}},{key:"renderTopPanel",value:function(){return Object(ee.jsxs)("div",{children:[Object(ee.jsx)(k.a,{variant:"contained",color:"secondary",onClick:this.delete,style:{marginRight:8,marginBottom:8},children:"Delete Snippet"}),Object(ee.jsx)(k.a,{variant:"contained",style:{marginRight:8,marginBottom:8},onClick:this.showEditorDialog,children:"Edit Snippet"}),Object(ee.jsx)(k.a,{variant:"contained",color:"primary",onClick:this.copy,style:{marginRight:8,marginBottom:8},children:"Copy Code"})]})}},{key:"renderEditorDialog",value:function(){return Object(ee.jsxs)(S.a,{fullScreen:!0,open:this.state.showEditor,onClose:this.closeEditorDialog,TransitionComponent:Je,children:[Object(ee.jsx)(R.a,{position:"relative",style:{background:"#fbf1d3",boxShadow:"none"},children:Object(ee.jsxs)(v.a,{children:[Object(ee.jsx)(_.a,{edge:"start",color:"inherit",onClick:this.closeEditorDialog,"aria-label":"close",children:Object(ee.jsx)(Le.a,{style:{fill:"#000"}})}),Object(ee.jsx)(_.a,{"aria-label":"save",color:"inherit",onClick:this.applyChange,children:Object(ee.jsx)(Ae.a,{style:{fill:"#000"}})})]})}),this.renderEditor()]})}},{key:"render",value:function(){return Object(ee.jsxs)(ee.Fragment,{children:[this.renderTopPanel(),Object(ee.jsxs)(ke.a,{style:{padding:16},children:[Object(ee.jsx)(J.a,{variant:"h4",gutterBottom:!0,children:this.state.snippet.title}),Object(ee.jsx)(Be.a,{className:this.state.snippet.language,children:this.state.snippet.code}),Object(ee.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.renderedDescription}})]}),this.renderSnackbar(),this.renderEditorDialog()]})}}]),n}(r.a.Component),Ke=function(e){var t=Object(a.useState)(e),n=Object(f.a)(t,2),r=n[0],i=n[1];return[r,i,function(e){"server"===e.target.name&&e.target.value.endsWith("/")&&(e.target.value=e.target.value.slice(0,-1)),i(Object(Z.a)(Object(Z.a)({},r),{},Object(I.a)({},e.target.name,e.target.value)))}]},Ue=n(115),qe=n.n(Ue),Qe=function(){var e=Object(O.a)(g.a.mark((function e(t,n){var a,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.post("".concat(t.server,"/auth"),{username:t.username,password:t.password});case 2:if(!(a=e.sent)){e.next=9;break}if((r=a.data).code!==Oe){e.next=9;break}return i=r.data.token,n({type:"SET_TOKEN",payload:i}),e.abrupt("return");case 9:console.log("Failed to refresh token."),console.error(a);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ve=Object(m.a)((function(e){return{root:{display:"flex"},content:{padding:e.spacing(3),marginLeft:be,width:"100%",height:"100%"}}}));var Xe=function(){var e=Object(a.useContext)(ne),t=Object(f.a)(e,2),n=t[0],r=t[1],i=Ke(n.Setting),c=Object(f.a)(i,3),s=c[0],o=c[1],l=c[2];Object(a.useEffect)((function(){!function(e){var t=localStorage.getItem("username"),n=localStorage.getItem("password"),a=localStorage.getItem("server");t&&n&&a?(e({type:"SET_SETTING",payload:{username:t,password:n,server:a}}),console.log("Setting is loaded.")):e({type:"SET_SETTING_DIALOG",payload:!0})}(r)}),[]),Object(a.useEffect)((function(){o(n.Setting)}),[n]);var d=Ve();return Object(ee.jsxs)("div",{className:d.root,children:[Object(ee.jsx)(x.a,{}),Object(ee.jsx)(ie,{}),Object(ee.jsx)(ve,{}),Object(ee.jsx)(we,{}),Object(ee.jsxs)("main",{className:d.content,children:[Object(ee.jsx)(v.a,{}),Object(ee.jsx)(Fe,{})]}),Object(ee.jsxs)(S.a,{open:n.SettingDialog.open,onClose:function(){r({type:"SET_SETTING_DIALOG",payload:!1})},"aria-labelledby":"form-dialog-title",children:[Object(ee.jsx)(C.a,{id:"form-dialog-title",children:"Setting"}),Object(ee.jsxs)(T.a,{children:[Object(ee.jsx)(E.a,{children:"Tips: you can use a localhost server."}),Object(ee.jsx)(y.a,{margin:"dense",name:"username",label:"Username",type:"text",value:s.username,onChange:l,fullWidth:!0}),Object(ee.jsx)(y.a,{margin:"dense",name:"password",label:"Password",type:"password",value:s.password,onChange:l,fullWidth:!0}),Object(ee.jsx)(y.a,{margin:"dense",name:"server",label:"Server Address",type:"url",value:s.server,onChange:l,fullWidth:!0})]}),Object(ee.jsxs)(w.a,{children:[Object(ee.jsx)(k.a,{onClick:Object(O.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(s,r);case 2:case"end":return e.stop()}}),e)}))),color:"primary",children:"Test"}),Object(ee.jsx)(k.a,{onClick:function(){!function(e,t){t({type:"SET_SETTING_DIALOG",payload:!1});for(var n=0,a=Object.entries(e);n<a.length;n++){var r=Object(f.a)(a[n],2),i=r[0],c=r[1];localStorage.setItem(i,c)}t({type:"SET_SETTING",payload:e})}(s,r)},color:"primary",children:"Save"})]})]})]})},Ye=function(){return Object(ee.jsx)("div",{children:"404"})},Ze=[{path:"/",element:Object(ee.jsx)(Xe,{}),children:[{path:"404",element:Object(ee.jsx)(Ye,{})},{path:"/",element:Object(ee.jsx)(Fe,{})},{path:"*",element:Object(ee.jsx)(s.a,{to:"/404"})}]}],$e=function(){Object(a.useEffect)((function(){var e=document.getElementById("ipl-progress-indicator");e&&(e.classList.add("available"),setTimeout((function(){e.outerHTML=""}),20))}),[]);var e=Object(s.h)(Ze);return Object(ee.jsx)(ae,{children:Object(ee.jsx)(o.a,{theme:h,children:e})})};c.a.render(Object(ee.jsx)(je.a,{children:Object(ee.jsx)(r.a.StrictMode,{children:Object(ee.jsx)($e,{})})}),document.getElementById("root"))}},[[388,1,2]]]);
//# sourceMappingURL=main.ab7195a8.chunk.js.map