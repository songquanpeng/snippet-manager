{"version":3,"sources":["theme.js","reducers/SettingDialog.js","reducers/Token.js","reducers/index.js","reducers/Setting.js","reducers/Toast.js","reducers/TagList.js","reducers/SnippetList.js","utils/constant.js","store.js","components/TopBar.js","utils/api.js","utils/utils.js","components/TagList.js","components/SnippetList.js","components/Snippet.js","hooks/settingForm.js","components/Toast.js","components/Layout.js","utils/setting.js","views/NotFoundView.js","routes.js","App.js","index.js"],"names":["mainTheme","createMuiTheme","palette","primary","blue","secondary","red","main","SettingDialog","state","action","type","open","payload","Token","combineReducers","reducers","newState","key","Setting","console","log","Toast","TagList","SnippetList","style","statusCode","toastType","initialState","username","password","server","message","duration","Context","createContext","Store","children","useReducer","Reducer","dispatch","Provider","value","useStyles","makeStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","search","position","borderRadius","shape","backgroundColor","fade","common","white","marginLeft","width","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","sectionDesktop","sectionMobile","root","appBar","zIndex","drawer","easing","sharp","leavingScreen","hide","TopBar","useContext","classes","React","useState","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","Boolean","isMobileMenuOpen","handleProfileMenuOpen","event","currentTarget","handleMobileMenuClose","handleMenuClose","menuId","renderMenu","Menu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","onClose","MenuItem","onClick","mobileMenuId","renderMobileMenu","IconButton","aria-label","Badge","badgeContent","aria-controls","aria-haspopup","className","AppBar","Toolbar","edge","Typography","variant","noWrap","InputBase","placeholder","input","inputProps","api","sleep","ms","Promise","resolve","setTimeout","refreshToken","a","axios","post","res","data","code","token","undefined","error","Api","ok","newToken","baseURL","headers","Authorization","refreshTagList","get","tags","drawerWidth","flexShrink","drawerPaper","drawerContainer","overflow","useEffect","Drawer","paper","List","map","tag","index","ListItem","button","component","Link","to","Text","ListItemIcon","ListItemText","marginTop","top","left","snippets","text","link","Paper","snippet","snackTimeout","Transition","forwardRef","props","ref","Slide","direction","Snippet","delete","copy","navigator","clipboard","writeText","onChange","newValue","draft","localStorage","setItem","setState","snippet2draft","language","description","draft2snippet","lines","split","firstTripleBacktickPos","secondTripleBacktickPos","i","length","trim","startsWith","descriptionStartPos","substr","slice","join","showEditorDialog","showEditor","closeEditorDialog","applyChange","needRenderMarkdown","renderedDescription","marked","loading","fontSize","showSnackbar","snackMessage","this","loadEditorConfig","getItem","parseInt","mode","name","setOptions","useWorker","clearTimeout","Snackbar","Button","marginBottom","Dialog","fullScreen","TransitionComponent","background","boxShadow","fill","renderEditor","renderTopPanel","gutterBottom","dangerouslySetInnerHTML","__html","renderSnackbar","renderEditorDialog","Component","useSettingForm","setting","setSetting","target","endsWith","Alert","elevation","handleClose","reason","autoHideDuration","severity","content","Layout","handleInputChange","loadSetting","CssBaseline","aria-labelledby","DialogTitle","DialogContent","DialogContentText","TextField","margin","label","fullWidth","DialogActions","success","Object","entries","saveSetting","NotFoundView","routes","path","element","App","e","document","getElementById","classList","add","outerHTML","routing","useRoutes","ThemeProvider","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.7c4d44c0.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\nimport blue from '@material-ui/core/colors/blue';\nimport red from '@material-ui/core/colors/red';\n\nconst mainTheme = createMuiTheme({\n  palette: {\n    primary: blue,\n    secondary: red,\n  },\n});\n\nconst editorTheme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#fbf1d3',\n    },\n    secondary: {\n      main: '#fbf6e3',\n    },\n  },\n});\n\nexport { mainTheme, editorTheme };\n","const SettingDialog = (state, action) => {\n  switch (action.type) {\n    case 'SET_SETTING_DIALOG':\n      return {\n        open: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default SettingDialog;\n","const Token = (state, action) => {\n  switch (action.type) {\n    case 'SET_TOKEN':\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default Token;\n","import SettingDialog from './SettingDialog';\nimport Token from './Token';\nimport Setting from './Setting';\nimport Toast from './Toast';\nimport TagList from './TagList';\nimport SnippetList from './SnippetList';\n\n// https://stackoverflow.com/questions/59200785/react-usereducer-how-to-combine-multiple-reducers\nconst combineReducers = (reducers) => {\n  return (state, action) => {\n    const newState = {};\n    for (let key in reducers) {\n      newState[key] = reducers[key](state[key], action);\n    }\n    return newState;\n  };\n};\n\nexport default combineReducers({\n  SettingDialog,\n  Token,\n  Setting,\n  Toast,\n  TagList,\n  SnippetList,\n});\n","const Setting = (state, action) => {\n  console.log('called: ', state, action);\n\n  switch (action.type) {\n    case 'SET_SETTING':\n      return {\n        ...action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default Setting;\n","const Toast = (state, action) => {\n  switch (action.type) {\n    case 'SHOW_TOAST':\n      return {\n        ...state,\n        ...action.payload,\n        open: true,\n      };\n    case 'CLOSE_TOAST':\n      return {\n        ...state,\n        open: false,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default Toast;\n","const TagList = (state, action) => {\n  console.log('called: ', state, action);\n  switch (action.type) {\n    case 'SET_TAG_LIST':\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default TagList;\n","const SnippetList = (state, action) => {\n  switch (action.type) {\n    case 'SET_SNIPPET_LIST':\n      return {\n        ...action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default SnippetList;\n","export const style = {\n  tagListWidth: 240,\n  snippetListWidth: 240,\n  topBarHeight: 64,\n};\n\nexport const statusCode = {\n  statusOk: 1000,\n  statusError: 1001,\n  statusPermissionDenied: 1002,\n  statusInvalidParameter: 1003,\n  statusUnexpectedError: 1004,\n  statusRecordNotFound: 1005,\n};\n\nexport const toastType = {\n  error: 'error',\n  warning: 'warning',\n  info: 'info',\n  success: 'success',\n};\n","import React, { createContext, useReducer } from 'react';\nimport Reducer from './reducers';\nimport { toastType } from './utils/constant';\n\nconst initialState = {\n  SettingDialog: {\n    open: false,\n  },\n  Token: '',\n  Setting: {\n    username: '',\n    password: '',\n    server: 'https://code-snippet-manager.herokuapp.com',\n  },\n  Toast: {\n    open: false,\n    message: '',\n    duration: 5000,\n    type: toastType.info,\n  },\n  TagList: [],\n  SnippetList: [],\n};\n\nconst Store = ({ children }) => {\n  const [state, dispatch] = useReducer(Reducer, initialState);\n  return (\n    <Context.Provider value={[state, dispatch]}>{children}</Context.Provider>\n  );\n};\n\nexport const Context = createContext(initialState);\nexport default Store;\n","import React, { useContext } from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport MailIcon from '@material-ui/icons/Mail';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Typography from '@material-ui/core/Typography';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputBase from '@material-ui/core/InputBase';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport { Context } from '../store';\nimport { loadSetting } from '../utils/setting';\n\nconst useStyles = makeStyles((theme) => ({\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(3),\n      width: 'auto',\n    },\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: '20ch',\n    },\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  hide: {\n    display: 'none',\n  },\n}));\n\nexport default function TopBar() {\n  const [_, dispatch] = useContext(Context);\n\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n  const handleProfileMenuOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const handleMobileMenuOpen = (event) => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n\n  const menuId = 'primary-search-account-menu';\n  const renderMenu = (\n    <Menu\n      anchorEl={anchorEl}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      id={menuId}\n      keepMounted\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMenuOpen}\n      onClose={handleMenuClose}\n    >\n      <MenuItem\n        onClick={() => {\n          handleMenuClose();\n          dispatch({ type: 'SET_SETTING_DIALOG', payload: true });\n        }}\n      >\n        Setting\n      </MenuItem>\n      <MenuItem onClick={handleMenuClose}>Logout</MenuItem>\n    </Menu>\n  );\n\n  const mobileMenuId = 'primary-search-account-menu-mobile';\n  const renderMobileMenu = (\n    <Menu\n      anchorEl={mobileMoreAnchorEl}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      id={mobileMenuId}\n      keepMounted\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMobileMenuOpen}\n      onClose={handleMobileMenuClose}\n    >\n      <MenuItem>\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\n          <Badge badgeContent={4} color=\"secondary\">\n            <MailIcon />\n          </Badge>\n        </IconButton>\n        <p>Messages</p>\n      </MenuItem>\n      <MenuItem>\n        <IconButton aria-label=\"show 11 new notifications\" color=\"inherit\">\n          <Badge badgeContent={11} color=\"secondary\">\n            <NotificationsIcon />\n          </Badge>\n        </IconButton>\n        <p>Notifications</p>\n      </MenuItem>\n      <MenuItem onClick={handleProfileMenuOpen}>\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"primary-search-account-menu\"\n          aria-haspopup=\"true\"\n          color=\"inherit\"\n        >\n          <AccountCircle />\n        </IconButton>\n        <p>Profile</p>\n      </MenuItem>\n    </Menu>\n  );\n\n  return (\n    <div className={classes.grow}>\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography className={classes.title} variant=\"h6\" noWrap>\n            Snippet Manager\n          </Typography>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <SearchIcon />\n            </div>\n            <InputBase\n              placeholder=\"Search…\"\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              inputProps={{ 'aria-label': 'search' }}\n            />\n          </div>\n          <div className={classes.grow} />\n          <div className={classes.sectionDesktop}>\n            <IconButton\n              edge=\"end\"\n              aria-label=\"account of current user\"\n              aria-controls={menuId}\n              aria-haspopup=\"true\"\n              onClick={handleProfileMenuOpen}\n              color=\"inherit\"\n            >\n              <AccountCircle />\n            </IconButton>\n          </div>\n          <div className={classes.sectionMobile}>\n            <IconButton\n              aria-label=\"show more\"\n              aria-controls={mobileMenuId}\n              aria-haspopup=\"true\"\n              onClick={handleMobileMenuOpen}\n              color=\"inherit\"\n            >\n              <MoreIcon />\n            </IconButton>\n          </div>\n        </Toolbar>\n      </AppBar>\n      {renderMobileMenu}\n      {renderMenu}\n    </div>\n  );\n}\n","import axios from 'axios';\nimport { statusCode } from './constant';\nimport { sleep } from './utils';\nimport { toastType } from './constant';\n\nlet api;\n\nexport const refreshToken = async (state, dispatch) => {\n  try {\n    let res = await axios.post(`${state.Setting.server}/auth`, {\n      username: state.Setting.username,\n      password: state.Setting.password,\n    });\n    let data = res.data;\n    if (data.code === statusCode.statusOk) {\n      let token = data.data.token;\n      dispatch({ type: 'SET_TOKEN', payload: token });\n      return [true, '', token];\n    } else {\n      console.log(data);\n      return [false, `Failed to refresh token: code ${data.code}.`, undefined];\n    }\n  } catch (e) {\n    console.log(state);\n    console.error(e);\n    return [false, `Failed to refresh token: ${e.message}.`, undefined];\n  }\n};\n\nexport const Api = async (state, dispatch) => {\n  let token = state.Token;\n  if (token === '') {\n    let [ok, message, newToken] = await refreshToken(state, dispatch);\n    if (ok) {\n      token = newToken;\n    } else {\n      dispatch({\n        type: 'SHOW_TOAST',\n        payload: {\n          message,\n          type: toastType.error,\n        },\n      });\n    }\n  }\n  api = axios.create({\n    baseURL: state.Setting.server + '/api',\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return api;\n};\n\nexport const refreshTagList = async (state, dispatch) => {\n  while (!api) {\n    // TODO: waiting for state be initialized.\n    console.log('refreshTagList waiting');\n    await sleep(50);\n  }\n  try {\n    let res = await api.get(`/tags`);\n    let data = res.data;\n    if (data.code === statusCode.statusOk) {\n      let tags = data.data;\n      console.log('Change SET_TAG_LIST');\n      dispatch({ type: 'SET_TAG_LIST', payload: tags });\n      return [true, ''];\n    } else {\n      return [false, `Failed to refresh tag list: ${data.message}.`];\n    }\n  } catch (e) {\n    console.error(e);\n    return [false, `Failed to refresh tag list: ${e.message}.`];\n  }\n};\n","export const sleep = (ms) => {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n};\n","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CodeIcon from '@material-ui/icons/Code';\nimport Drawer from '@material-ui/core/Drawer';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { Link } from 'react-router-dom';\nimport { style, toastType } from '../utils/constant';\nimport { Context } from '../store';\nimport { loadSetting } from '../utils/setting';\nimport { Api, refreshTagList } from '../utils/api';\n\nconst drawerWidth = style.tagListWidth;\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerContainer: {\n    overflow: 'auto',\n  },\n}));\n\nexport default function TagList() {\n  const [state, dispatch] = useContext(Context);\n\n  useEffect(() => {\n    if (state.Setting.username !== '') {\n      (async () => {\n        let [ok, message] = await refreshTagList(state, dispatch);\n        if (!ok) {\n          dispatch({\n            type: 'SHOW_TOAST',\n            payload: {\n              message,\n              type: toastType.error,\n            },\n          });\n        }\n      })();\n    }\n  }, [state.Setting]);\n\n  const classes = useStyles();\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"permanent\"\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <Toolbar />\n      <div className={classes.drawerContainer}>\n        <List>\n          {state.TagList.map((tag, index) => (\n            <ListItem\n              button\n              key={tag.Text}\n              component={Link}\n              to={`/tag/${tag.Text}`}\n            >\n              <ListItemIcon>\n                <CodeIcon />\n              </ListItemIcon>\n              <ListItemText primary={tag.Text} />\n            </ListItem>\n          ))}\n        </List>\n      </div>\n    </Drawer>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { Link } from 'react-router-dom';\nimport { Paper } from '@material-ui/core';\nimport { style } from '../utils/constant';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%',\n    width: style.snippetListWidth,\n    marginTop: style.topBarHeight,\n    position: 'fixed',\n    top: 0,\n    left: style.tagListWidth,\n  },\n}));\n\nlet snippets = [\n  { text: '通过 window 对象使函数在页面可用', link: 'temp-link-1' },\n  { text: '通过构建 HTML 文本来创建并插入元素', link: 'temp-link-2' },\n  { text: '通过 API 来创建元素', link: 'temp-link-3' },\n  { text: '复制文字到剪切板', link: 'temp-link-4' },\n  { text: '打开新的页面', link: 'temp-link-5' },\n];\n\nexport default function SnippetList() {\n  const classes = useStyles();\n\n  return (\n    <Paper className={classes.root}>\n      <List>\n        {snippets.map((snippet, index) => (\n          <ListItem\n            button\n            key={snippet.link}\n            component={Link}\n            to={`/snippet/${snippet.link}`}\n          >\n            <ListItemText primary={snippet.text} />\n          </ListItem>\n        ))}\n      </List>\n    </Paper>\n  );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-markdown';\nimport 'ace-builds/src-noconflict/snippets/markdown';\nimport 'ace-builds/src-noconflict/theme-solarized_light';\n\nimport Paper from '@material-ui/core/Paper';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Dialog from '@material-ui/core/Dialog';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SaveIcon from '@material-ui/icons/Save';\nimport Slide from '@material-ui/core/Slide';\nimport Typography from '@material-ui/core/Typography';\n\nimport Highlight from 'react-highlight'\n\nimport marked from 'marked';\n\nlet snackTimeout = undefined;\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nclass Snippet extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      theme: 'solarized_light',\n      fontSize: 18,\n      snippet: {\n        language: 'javascript',\n        title: '通过 API 来创建元素',\n        code:\n          \"let hiddenTextArea = document.createElement('textarea');\\n\" +\n          'hiddenTextArea.setAttribute(\"id\", \"hiddenTextArea\");\\n' +\n          'hiddenTextArea.style.cssText = \"display:hidden;\";',\n        description:\n          '利用 API 来创建元素，除此之外还可以通过构建 HTML 文本来创建元素。',\n        tag: '浏览器脚本 HTML API',\n      },\n      draft: '',\n      showSnackbar: false,\n      showEditor: false,\n      snackMessage: 'Hi',\n      renderedDescription: '',\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({\n      renderedDescription: marked(this.state.snippet.description),\n    });\n    this.loadEditorConfig();\n  }\n\n  delete = async () => {\n    // TODO: send delete request\n    // TODO: switch page\n    this.message('Snippet has been deleted.');\n  };\n\n  copy = async () => {\n    try {\n      await navigator.clipboard.writeText(this.state.snippet.code);\n      this.message('Snippet copied.');\n    } catch (e) {\n      this.message(e);\n    }\n  };\n\n  onChange = (newValue) => {\n    let draft = newValue;\n    localStorage.setItem('editorContent', draft);\n    this.setState({ draft });\n  };\n\n  loadEditorConfig() {\n    let theme = localStorage.getItem('theme');\n    if (!theme) {\n      theme = this.state.theme;\n    }\n    let fontSize = localStorage.getItem('fontSize');\n    fontSize = parseInt(fontSize);\n    if (!fontSize) {\n      fontSize = this.state.fontSize;\n    }\n    this.setState({\n      theme,\n      fontSize,\n    });\n  }\n\n  renderEditor() {\n    return (\n      <AceEditor\n        style={{ width: '100%', height: '100%' }}\n        mode={'markdown'}\n        theme={this.state.theme}\n        name={'editor'}\n        onChange={this.onChange}\n        value={this.state.draft}\n        fontSize={this.state.fontSize}\n        setOptions={{ useWorker: false }}\n      />\n    );\n  }\n\n  message(message) {\n    this.setState({\n      showSnackbar: true,\n      snackMessage: message,\n    });\n    clearTimeout(snackTimeout);\n    snackTimeout = setTimeout(() => {\n      this.setState({\n        showSnackbar: false,\n      });\n    }, 3000);\n  }\n\n  renderSnackbar() {\n    return (\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        open={this.state.showSnackbar}\n        message={this.state.snackMessage}\n      />\n    );\n  }\n\n  renderTopPanel() {\n    const marginRight = 8;\n    const marginBottom = 8;\n    return (\n      <div>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={this.delete}\n          style={{ marginRight, marginBottom }}\n        >\n          Delete Snippet\n        </Button>\n        <Button\n          variant=\"contained\"\n          style={{ marginRight, marginBottom }}\n          onClick={this.showEditorDialog}\n        >\n          Edit Snippet\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={this.copy}\n          style={{ marginRight, marginBottom }}\n        >\n          Copy Code\n        </Button>\n      </div>\n    );\n  }\n\n  snippet2draft = (snippet) => {\n    return `# ${snippet.title}\nTags: ${snippet.tag}\n\n## Code\n\\`\\`\\` ${snippet.language}\n${snippet.code}\n\\`\\`\\`\n\n## Description\n${snippet.description}`;\n  };\n\n  draft2snippet = (draft) => {\n    let lines = draft.split('\\n');\n    let firstTripleBacktickPos = 0;\n    let secondTripleBacktickPos = 0;\n    for (let i = 2; i < lines.length; i++) {\n      if (lines[i].trim().startsWith('```')) {\n        if (firstTripleBacktickPos === 0) {\n          firstTripleBacktickPos = i;\n        } else {\n          secondTripleBacktickPos = i;\n          break;\n        }\n      }\n    }\n    let descriptionStartPos = 0;\n    for (let i = secondTripleBacktickPos + 1; i < lines.length; i++) {\n      if (lines[i].trim()) {\n        if (lines[i].trim().startsWith('#')) {\n          descriptionStartPos = i + 1;\n        } else {\n          descriptionStartPos = i;\n        }\n        break;\n      }\n    }\n\n    return {\n      language: lines[firstTripleBacktickPos].substr(3).trim(),\n      title: lines[0].substr(1).trim(),\n      code: lines\n        .slice(firstTripleBacktickPos + 1, secondTripleBacktickPos)\n        .join('\\n'),\n      description: lines.slice(descriptionStartPos).join('\\n'),\n      tag: lines[1].split(' ').slice(1).join(' '),\n    };\n  };\n\n  showEditorDialog = () => {\n    this.setState({\n      draft: this.snippet2draft(this.state.snippet),\n      showEditor: true,\n    });\n  };\n\n  closeEditorDialog = () => {\n    this.setState({\n      showEditor: false,\n    });\n  };\n\n  applyChange = async () => {\n    let snippet = this.draft2snippet(this.state.draft);\n    let needRenderMarkdown =\n      this.state.snippet.description !== snippet.description;\n    this.setState({\n      snippet,\n    });\n    if (needRenderMarkdown) {\n      this.setState({\n        renderedDescription: marked(snippet.description),\n      });\n    }\n    // TODO: send update request\n    this.message('Snippet has been updated.');\n  };\n\n  renderEditorDialog() {\n    return (\n      <Dialog\n        fullScreen\n        open={this.state.showEditor}\n        onClose={this.closeEditorDialog}\n        TransitionComponent={Transition}\n      >\n        <AppBar\n          position={'relative'}\n          style={{ background: '#fbf1d3', boxShadow: 'none' }}\n        >\n          <Toolbar>\n            <IconButton\n              edge=\"start\"\n              color=\"inherit\"\n              onClick={this.closeEditorDialog}\n              aria-label=\"close\"\n            >\n              <CloseIcon style={{ fill: '#000' }} />\n            </IconButton>\n            <IconButton\n              aria-label=\"save\"\n              color=\"inherit\"\n              onClick={this.applyChange}\n            >\n              <SaveIcon style={{ fill: '#000' }} />\n            </IconButton>\n          </Toolbar>\n        </AppBar>\n        {this.renderEditor()}\n      </Dialog>\n    );\n  }\n\n  render() {\n    return (\n      <>\n        {this.renderTopPanel()}\n        <Paper style={{ padding: 16 }}>\n          <Typography variant=\"h4\" gutterBottom>\n            {this.state.snippet.title}\n          </Typography>\n          <Highlight className={this.state.snippet.language}>\n            {this.state.snippet.code}\n          </Highlight>\n          <div\n            dangerouslySetInnerHTML={{\n              __html: this.state.renderedDescription,\n            }}\n          />\n        </Paper>\n        {this.renderSnackbar()}\n        {this.renderEditorDialog()}\n      </>\n    );\n  }\n}\n\nexport default Snippet;\n","import React, { useState } from 'react';\nconst useSettingForm = (initialState) => {\n  const [setting, setSetting] = useState(initialState);\n\n  const handleInputChange = (event) => {\n    if (event.target.name === 'server' && event.target.value.endsWith('/')) {\n      event.target.value = event.target.value.slice(0, -1);\n    }\n    setSetting({\n      ...setting,\n      [event.target.name]: event.target.value,\n    });\n  };\n  return [setting, setSetting, handleInputChange];\n};\nexport default useSettingForm;\n","import React, { useContext } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { Context } from '../store';\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default function Toast() {\n  const [state, dispatch] = useContext(Context);\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    dispatch({ type: 'CLOSE_TOAST', payload: {} });\n  };\n\n  return (\n    <Snackbar\n      open={state.Toast.open}\n      autoHideDuration={state.Toast.duration}\n      onClose={handleClose}\n    >\n      <Alert onClose={handleClose} severity={state.Toast.type}>\n        {state.Toast.message}\n      </Alert>\n    </Snackbar>\n  );\n}\n","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TopBar from './TopBar';\nimport TagList from './TagList';\nimport SnippetList from './SnippetList';\nimport Snippet from './Snippet';\nimport { style } from '../utils/constant';\nimport useSettingForm from '../hooks/settingForm';\nimport { Context } from '../store';\n\nimport { loadSetting, saveSetting } from '../utils/setting';\nimport { Api, refreshToken } from '../utils/api';\nimport Toast from './Toast';\nimport { toastType } from '../utils/constant';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  content: {\n    padding: theme.spacing(3),\n    marginLeft: style.snippetListWidth,\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nfunction Layout() {\n  const [state, dispatch] = useContext(Context);\n  const [setting, setSetting, handleInputChange] = useSettingForm(\n    state.Setting\n  );\n\n  useEffect(() => {\n    loadSetting(dispatch);\n  }, []);\n\n  // After the state is changed, update setting.\n  useEffect(() => {\n    // TODO: Looks like this useEffect will be called on initialized\n    if (state.Setting.username !== '') {\n      setSetting(state.Setting);\n      Api(state, dispatch);\n    }\n  }, [state.Setting]);\n\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <TopBar />\n      <TagList />\n      <SnippetList />\n      <main className={classes.content}>\n        <Toolbar />\n        <Snippet />\n      </main>\n      <Dialog\n        open={state.SettingDialog.open}\n        onClose={() => {\n          dispatch({ type: 'SET_SETTING_DIALOG', payload: false });\n        }}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Setting</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Tips: you can use a localhost server.\n          </DialogContentText>\n          <TextField\n            margin=\"dense\"\n            name=\"username\"\n            label=\"Username\"\n            type=\"text\"\n            value={setting.username}\n            onChange={handleInputChange}\n            fullWidth\n          />\n          <TextField\n            margin=\"dense\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            value={setting.password}\n            onChange={handleInputChange}\n            fullWidth\n          />\n          <TextField\n            margin=\"dense\"\n            name=\"server\"\n            label=\"Server Address\"\n            type=\"url\"\n            value={setting.server}\n            onChange={handleInputChange}\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={async () => {\n              let [success, message, _] = await refreshToken(\n                { Setting: setting },\n                dispatch\n              );\n              let type = toastType.error;\n              if (success) {\n                message = 'Your setting is okay.';\n                type = toastType.success;\n              }\n              dispatch({\n                type: 'SHOW_TOAST',\n                payload: {\n                  message,\n                  type,\n                  duration: success ? 3000 : 6000,\n                },\n              });\n            }}\n            color=\"primary\"\n          >\n            Test\n          </Button>\n          <Button\n            onClick={() => {\n              saveSetting(setting, dispatch);\n              dispatch({\n                type: 'SHOW_TOAST',\n                payload: {\n                  message: 'Your settings have been saved in local storage.',\n                  type: toastType.success,\n                  duration: 3000,\n                },\n              });\n            }}\n            color=\"primary\"\n          >\n            Save\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Toast />\n    </div>\n  );\n}\n\nexport default Layout;\n","export function loadSetting(dispatch) {\n  let username = localStorage.getItem('username');\n  let password = localStorage.getItem('password');\n  let server = localStorage.getItem('server');\n  if (!username || !password || !server) {\n    dispatch({ type: 'SET_SETTING_DIALOG', payload: true });\n  } else {\n    dispatch({\n      type: 'SET_SETTING',\n      payload: {\n        username,\n        password,\n        server,\n      },\n    });\n  }\n}\n\nexport function saveSetting(setting, dispatch) {\n  // Close the setting dialog.\n  dispatch({ type: 'SET_SETTING_DIALOG', payload: false });\n  // Save to local storage\n  for (const [key, value] of Object.entries(setting)) {\n    localStorage.setItem(key, value);\n  }\n  // Save to global state\n  dispatch({ type: 'SET_SETTING', payload: setting });\n}\n","import React from 'react';\n\nconst NotFoundView = () => {\n  return <div>404</div>;\n};\n\nexport default NotFoundView;\n","import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport Layout from './components/Layout';\nimport NotFoundView from './views/NotFoundView';\nimport Snippet from './components/Snippet';\n\nconst routes = [\n  {\n    path: '/',\n    element: <Layout />,\n    children: [\n      { path: '404', element: <NotFoundView /> },\n      { path: '/', element: <Snippet /> },\n      { path: '*', element: <Navigate to=\"/404\" /> },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\nimport { useEffect } from 'react';\nimport { useRoutes } from 'react-router-dom';\n\nimport { ThemeProvider } from '@material-ui/core';\nimport { mainTheme } from './theme';\nimport routes from './routes';\nimport Store from './store';\n\nconst App = () => {\n  useEffect(() => {\n    const e = document.getElementById('ipl-progress-indicator');\n    if (e) {\n      e.classList.add('available');\n      setTimeout(() => {\n        e.outerHTML = '';\n      }, 20);\n    }\n  }, []);\n  const routing = useRoutes(routes);\n  return (\n    <Store>\n      <ThemeProvider theme={mainTheme}>{routing}</ThemeProvider>\n    </Store>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <BrowserRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}