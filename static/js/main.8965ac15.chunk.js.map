{"version":3,"sources":["theme.js","reducers.js","utils/constant.js","store.js","components/TopBar.js","utils/api.js","utils/utils.js","components/TagList.js","components/SnippetList.js","utils/editor.js","components/Snippet.js","hooks/settingForm.js","components/Toast.js","components/Layout.js","utils/setting.js","views/NotFoundView.js","routes.js","App.js","index.js"],"names":["mainTheme","createMuiTheme","palette","primary","blue","secondary","red","main","Reducer","state","action","type","Setting","payload","SettingDialog","SnippetList","TagList","Toast","open","Token","CurrentTag","CurrentSnippet","style","statusCode","toastType","initialState","username","password","server","message","duration","Context","createContext","Store","children","useReducer","dispatch","Provider","value","useStyles","makeStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","search","position","borderRadius","shape","backgroundColor","fade","common","white","marginLeft","width","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","sectionDesktop","sectionMobile","root","appBar","zIndex","drawer","easing","sharp","leavingScreen","hide","TopBar","useContext","classes","React","useState","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","Boolean","isMobileMenuOpen","handleProfileMenuOpen","event","currentTarget","handleMobileMenuClose","handleMenuClose","menuId","renderMenu","Menu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","onClose","MenuItem","onClick","mobileMenuId","renderMobileMenu","IconButton","aria-label","Badge","badgeContent","aria-controls","aria-haspopup","className","AppBar","Toolbar","edge","Typography","variant","noWrap","InputBase","placeholder","input","inputProps","api","sleep","ms","Promise","resolve","setTimeout","refreshToken","a","axios","post","res","data","code","token","console","log","undefined","error","Api","ok","newToken","baseURL","headers","Authorization","refreshTagList","get","tags","refreshSnippetList","ID","snippets","getSnippet","snippet","updateSnippet","put","drawerWidth","flexShrink","drawerPaper","drawerContainer","overflow","useEffect","Drawer","paper","List","map","tag","index","ListItem","button","component","Link","to","Text","ListItemIcon","ListItemText","marginTop","top","left","length","Paper","Title","draft2snippet","draft","lines","split","firstTripleBacktickPos","secondTripleBacktickPos","i","trim","startsWith","descriptionStartPos","Language","substr","Code","slice","join","Description","Tags","Transition","forwardRef","props","ref","Slide","direction","Snippet","fontSize","show","editor","setEditor","setSnippet","renderedDescription","setRenderedDescription","setDraft","loadEditorConfig","marked","applyChange","newSnippet","toast","copy","navigator","clipboard","writeText","localStorage","getItem","parseInt","Button","marginBottom","snippet2draft","gutterBottom","dangerouslySetInnerHTML","__html","Dialog","fullScreen","TransitionComponent","background","boxShadow","fill","mode","name","onChange","newValue","setItem","setOptions","useWorker","useSettingForm","setting","setSetting","target","endsWith","Alert","elevation","handleClose","reason","Snackbar","autoHideDuration","severity","content","Layout","handleInputChange","loadSetting","CssBaseline","aria-labelledby","DialogTitle","DialogContent","DialogContentText","TextField","margin","label","fullWidth","DialogActions","success","Object","entries","key","saveSetting","NotFoundView","routes","path","element","App","e","document","getElementById","classList","add","outerHTML","routing","useRoutes","ThemeProvider","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.8965ac15.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\nimport blue from '@material-ui/core/colors/blue';\nimport red from '@material-ui/core/colors/red';\n\nconst mainTheme = createMuiTheme({\n  palette: {\n    primary: blue,\n    secondary: red,\n  },\n});\n\nconst editorTheme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#fbf1d3',\n    },\n    secondary: {\n      main: '#fbf6e3',\n    },\n  },\n});\n\nexport { mainTheme, editorTheme };\n","const Reducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_SETTING':\n      return {\n        ...state,\n        Setting: action.payload,\n      };\n    case 'SET_SETTING_DIALOG':\n      return {\n        ...state,\n        SettingDialog: action.payload,\n      };\n    case 'SET_SNIPPET_LIST':\n      return {\n        ...state,\n        SnippetList: action.payload,\n      };\n    case 'SET_TAG_LIST':\n      // TODO: i don't know why it's called twice\n      // React useReducer Hook fires twice\n      return {\n        ...state,\n        TagList: action.payload,\n      };\n    case 'SHOW_TOAST':\n      return {\n        ...state,\n        Toast: {\n          ...state.action,\n          ...action.payload,\n          open: true,\n        },\n      };\n    case 'CLOSE_TOAST':\n      return {\n        ...state,\n        Toast: {\n          ...state.action,\n          ...action.payload,\n          open: false,\n        },\n      };\n    case 'SET_TOKEN':\n      return {\n        ...state,\n        Token: action.payload,\n      };\n    case 'SET_CURRENT_TAG':\n      return {\n        ...state,\n        CurrentTag: action.payload,\n      };\n    case 'SET_CURRENT_SNIPPET':\n      return {\n        ...state,\n        CurrentSnippet: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default Reducer;\n","export const style = {\n  tagListWidth: 240,\n  snippetListWidth: 240,\n  topBarHeight: 64,\n};\n\nexport const statusCode = {\n  statusOk: 1000,\n  statusError: 1001,\n  statusPermissionDenied: 1002,\n  statusInvalidParameter: 1003,\n  statusUnexpectedError: 1004,\n  statusRecordNotFound: 1005,\n};\n\nexport const toastType = {\n  error: 'error',\n  warning: 'warning',\n  info: 'info',\n  success: 'success',\n};\n","import React, { createContext, useReducer } from 'react';\nimport Reducer from './reducers';\nimport { toastType } from './utils/constant';\n\nconst initialState = {\n  SettingDialog: false,\n  Token: '',\n  Setting: {\n    username: '',\n    password: '',\n    server: 'https://code-snippet-manager.herokuapp.com',\n  },\n  Toast: {\n    open: false,\n    message: '',\n    duration: 5000,\n    type: toastType.info,\n  },\n  TagList: [],\n  SnippetList: [],\n  CurrentTag: '',\n  CurrentSnippet: '',\n};\n\nconst Store = ({ children }) => {\n  const [state, dispatch] = useReducer(Reducer, initialState);\n  return (\n    <Context.Provider value={[state, dispatch]}>{children}</Context.Provider>\n  );\n};\n\nexport const Context = createContext(initialState);\nexport default Store;\n","import React, { useContext } from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport MailIcon from '@material-ui/icons/Mail';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Typography from '@material-ui/core/Typography';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputBase from '@material-ui/core/InputBase';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport { Context } from '../store';\nimport { loadSetting } from '../utils/setting';\n\nconst useStyles = makeStyles((theme) => ({\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(3),\n      width: 'auto',\n    },\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: '20ch',\n    },\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  hide: {\n    display: 'none',\n  },\n}));\n\nexport default function TopBar() {\n  const [_, dispatch] = useContext(Context);\n\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n  const handleProfileMenuOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const handleMobileMenuOpen = (event) => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n\n  const menuId = 'primary-search-account-menu';\n  const renderMenu = (\n    <Menu\n      anchorEl={anchorEl}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      id={menuId}\n      keepMounted\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMenuOpen}\n      onClose={handleMenuClose}\n    >\n      <MenuItem\n        onClick={() => {\n          handleMenuClose();\n          dispatch({ type: 'SET_SETTING_DIALOG', payload: true });\n        }}\n      >\n        Setting\n      </MenuItem>\n      <MenuItem onClick={handleMenuClose}>Logout</MenuItem>\n    </Menu>\n  );\n\n  const mobileMenuId = 'primary-search-account-menu-mobile';\n  const renderMobileMenu = (\n    <Menu\n      anchorEl={mobileMoreAnchorEl}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      id={mobileMenuId}\n      keepMounted\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMobileMenuOpen}\n      onClose={handleMobileMenuClose}\n    >\n      <MenuItem>\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\n          <Badge badgeContent={4} color=\"secondary\">\n            <MailIcon />\n          </Badge>\n        </IconButton>\n        <p>Messages</p>\n      </MenuItem>\n      <MenuItem>\n        <IconButton aria-label=\"show 11 new notifications\" color=\"inherit\">\n          <Badge badgeContent={11} color=\"secondary\">\n            <NotificationsIcon />\n          </Badge>\n        </IconButton>\n        <p>Notifications</p>\n      </MenuItem>\n      <MenuItem onClick={handleProfileMenuOpen}>\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"primary-search-account-menu\"\n          aria-haspopup=\"true\"\n          color=\"inherit\"\n        >\n          <AccountCircle />\n        </IconButton>\n        <p>Profile</p>\n      </MenuItem>\n    </Menu>\n  );\n\n  return (\n    <div className={classes.grow}>\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography className={classes.title} variant=\"h6\" noWrap>\n            Snippet Manager\n          </Typography>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <SearchIcon />\n            </div>\n            <InputBase\n              placeholder=\"Search…\"\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              inputProps={{ 'aria-label': 'search' }}\n            />\n          </div>\n          <div className={classes.grow} />\n          <div className={classes.sectionDesktop}>\n            <IconButton\n              edge=\"end\"\n              aria-label=\"account of current user\"\n              aria-controls={menuId}\n              aria-haspopup=\"true\"\n              onClick={handleProfileMenuOpen}\n              color=\"inherit\"\n            >\n              <AccountCircle />\n            </IconButton>\n          </div>\n          <div className={classes.sectionMobile}>\n            <IconButton\n              aria-label=\"show more\"\n              aria-controls={mobileMenuId}\n              aria-haspopup=\"true\"\n              onClick={handleMobileMenuOpen}\n              color=\"inherit\"\n            >\n              <MoreIcon />\n            </IconButton>\n          </div>\n        </Toolbar>\n      </AppBar>\n      {renderMobileMenu}\n      {renderMenu}\n    </div>\n  );\n}\n","import axios from 'axios';\nimport { statusCode, toastType } from './constant';\nimport { sleep } from './utils';\n\nlet api;\n\nexport const refreshToken = async (state, dispatch) => {\n  try {\n    let res = await axios.post(`${state.Setting.server}/auth`, {\n      username: state.Setting.username,\n      password: state.Setting.password,\n    });\n    let data = res.data;\n    if (data.code === statusCode.statusOk) {\n      let token = data.data.token;\n      dispatch({ type: 'SET_TOKEN', payload: token });\n      return [true, '', token];\n    } else {\n      console.log(data);\n      return [false, `Failed to refresh token: code ${data.code}.`, undefined];\n    }\n  } catch (e) {\n    console.log(state);\n    console.error(e);\n    return [false, `Failed to refresh token: ${e.message}.`, undefined];\n  }\n};\n\nexport const Api = async (state, dispatch) => {\n  let token = state.Token;\n  if (token === '') {\n    let [ok, message, newToken] = await refreshToken(state, dispatch);\n    if (ok) {\n      token = newToken;\n    } else {\n      dispatch({\n        type: 'SHOW_TOAST',\n        payload: {\n          message,\n          type: toastType.error,\n        },\n      });\n    }\n  }\n  api = axios.create({\n    baseURL: state.Setting.server + '/api',\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return api;\n};\n\nexport const refreshTagList = async (state, dispatch) => {\n  while (!api) {\n    // TODO: waiting for state be initialized.\n    console.log('refreshTagList waiting');\n    await sleep(50);\n  }\n  try {\n    let res = await api.get(`/tags`);\n    let data = res.data;\n    if (data.code === statusCode.statusOk) {\n      let tags = data.data;\n      dispatch({ type: 'SET_TAG_LIST', payload: tags });\n      return [true, ''];\n    } else {\n      return [false, `Failed to refresh tag list: ${data.message}.`];\n    }\n  } catch (e) {\n    console.error(e);\n    return [false, `Failed to refresh tag list: ${e.message}.`];\n  }\n};\n\nexport const refreshSnippetList = async (state, dispatch) => {\n  let id = state.CurrentTag;\n  if (id === '') {\n    id = state.TagList[0].ID;\n  }\n  try {\n    let res = await api.get(`/tag/${id}`);\n    let data = res.data;\n    if (data.code === statusCode.statusOk) {\n      let snippets = data.data;\n      if (snippets === null) {\n        snippets = [];\n      }\n      dispatch({ type: 'SET_SNIPPET_LIST', payload: snippets });\n      return [true, ''];\n    } else {\n      return [false, `Failed to refresh snippet list: ${data.message}.`];\n    }\n  } catch (e) {\n    console.error(e);\n    return [false, `Failed to refresh snippet list: ${e.message}.`];\n  }\n};\n\nexport const getSnippet = async (state) => {\n  while (!api) {\n    // TODO: waiting for state be initialized.\n    await sleep(50);\n  }\n  let id = state.CurrentSnippet;\n  if (id !== '') {\n    try {\n      let res = await api.get(`/snippet/${id}`);\n      let data = res.data;\n      if (data.code === statusCode.statusOk) {\n        return [true, data.data.snippet];\n      } else {\n        console.error(`Failed to fetch snippet: ${data.message}.`);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  return [false, undefined];\n};\n\nexport const updateSnippet = async (snippet) => {\n  let ok = false;\n  let message = '';\n  try {\n    let res = await api.put(`/snippet`, snippet);\n    let data = res.data;\n    if (data.code === statusCode.statusOk) {\n      ok = true;\n    }\n    message = data.message;\n  } catch (e) {\n    console.error(e);\n    message = e;\n  }\n  return [ok, message];\n};\n","export const sleep = (ms) => {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n};\n","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CodeIcon from '@material-ui/icons/Code';\nimport Drawer from '@material-ui/core/Drawer';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { Link } from 'react-router-dom';\nimport { style, toastType } from '../utils/constant';\nimport { Context } from '../store';\nimport { loadSetting } from '../utils/setting';\nimport { Api, refreshTagList } from '../utils/api';\n\nconst drawerWidth = style.tagListWidth;\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerContainer: {\n    overflow: 'auto',\n  },\n}));\n\nexport default function TagList() {\n  const [state, dispatch] = useContext(Context);\n\n  useEffect(() => {\n    if (state.Setting.username !== '') {\n      (async () => {\n        let [ok, message] = await refreshTagList(state, dispatch);\n        if (!ok) {\n          dispatch({\n            type: 'SHOW_TOAST',\n            payload: {\n              message,\n              type: toastType.error,\n            },\n          });\n        }\n      })();\n    }\n  }, [state.Setting]);\n\n  const classes = useStyles();\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"permanent\"\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <Toolbar />\n      <div className={classes.drawerContainer}>\n        <List>\n          {state.TagList.map((tag, index) => (\n            <ListItem\n              button\n              key={tag.ID}\n              component={Link}\n              to={`/tag/${tag.Text}`}\n              onClick={() => {\n                dispatch({ type: 'SET_CURRENT_TAG', payload: tag.ID });\n              }}\n            >\n              <ListItemIcon>\n                <CodeIcon />\n              </ListItemIcon>\n              <ListItemText primary={tag.Text} />\n            </ListItem>\n          ))}\n        </List>\n      </div>\n    </Drawer>\n  );\n}\n","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { Link } from 'react-router-dom';\nimport { Paper } from '@material-ui/core';\nimport { style, toastType } from '../utils/constant';\nimport { Context } from '../store';\nimport { refreshSnippetList, refreshTagList } from '../utils/api';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%',\n    width: style.snippetListWidth,\n    marginTop: style.topBarHeight,\n    position: 'fixed',\n    top: 0,\n    left: style.tagListWidth,\n  },\n}));\n\nexport default function SnippetList() {\n  const [state, dispatch] = useContext(Context);\n\n  useEffect(() => {\n    if (state.TagList.length !== 0) {\n      (async () => {\n        let [ok, message] = await refreshSnippetList(state, dispatch);\n        if (!ok) {\n          dispatch({\n            type: 'SHOW_TOAST',\n            payload: {\n              message,\n              type: toastType.error,\n            },\n          });\n        }\n      })();\n    }\n  }, [state.TagList, state.CurrentTag]);\n\n  const classes = useStyles();\n\n  return (\n    <Paper className={classes.root}>\n      <List>\n        {state.SnippetList.map((snippet, index) => (\n          <ListItem\n            button\n            key={snippet.ID}\n            component={Link}\n            to={`/snippet/${snippet.ID}`}\n            onClick={() => {\n              dispatch({ type: 'SET_CURRENT_SNIPPET', payload: snippet.ID });\n            }}\n          >\n            <ListItemText primary={snippet.Title} />\n          </ListItem>\n        ))}\n      </List>\n    </Paper>\n  );\n}\n","export const snippet2draft = (snippet) => {\n  return `# ${snippet.Title}\nTags: ${snippet.Tags}\n\n## Code\n\\`\\`\\` ${snippet.Language}\n${snippet.Code}\n\\`\\`\\`\n\n## Description\n${snippet.Description}`;\n};\n\nexport const draft2snippet = (draft) => {\n  let lines = draft.split('\\n');\n  let firstTripleBacktickPos = 0;\n  let secondTripleBacktickPos = 0;\n  for (let i = 2; i < lines.length; i++) {\n    if (lines[i].trim().startsWith('```')) {\n      if (firstTripleBacktickPos === 0) {\n        firstTripleBacktickPos = i;\n      } else {\n        secondTripleBacktickPos = i;\n        break;\n      }\n    }\n  }\n  let descriptionStartPos = 0;\n  for (let i = secondTripleBacktickPos + 1; i < lines.length; i++) {\n    if (lines[i].trim()) {\n      if (lines[i].trim().startsWith('#')) {\n        descriptionStartPos = i + 1;\n      } else {\n        descriptionStartPos = i;\n      }\n      break;\n    }\n  }\n\n  return {\n    Language: lines[firstTripleBacktickPos].substr(3).trim(),\n    Title: lines[0].substr(1).trim(),\n    Code: lines\n      .slice(firstTripleBacktickPos + 1, secondTripleBacktickPos)\n      .join('\\n'),\n    Description: lines.slice(descriptionStartPos).join('\\n'),\n    Tags: lines[1].split(' ').slice(1).join(' '),\n  };\n};\n","import React, { useContext, useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-markdown';\nimport 'ace-builds/src-noconflict/snippets/markdown';\nimport 'ace-builds/src-noconflict/theme-solarized_light';\n\nimport Paper from '@material-ui/core/Paper';\nimport Dialog from '@material-ui/core/Dialog';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SaveIcon from '@material-ui/icons/Save';\nimport Slide from '@material-ui/core/Slide';\nimport Typography from '@material-ui/core/Typography';\n\nimport Highlight from 'react-highlight';\nimport marked from 'marked';\nimport { Context } from '../store';\n\nimport { snippet2draft, draft2snippet } from '../utils/editor';\nimport { toastType } from '../utils/constant';\nimport { getSnippet, updateSnippet } from '../utils/api';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nfunction Snippet() {\n  const [state, dispatch] = useContext(Context);\n  const [editor, setEditor] = useState({\n    theme: 'solarized_light',\n    fontSize: 18,\n    show: false,\n  });\n  const [snippet, setSnippet] = useState({\n    Language: '',\n    Code: '',\n    Tags: '',\n    Description: '',\n    Title: '',\n    ID: '',\n  });\n  const [renderedDescription, setRenderedDescription] = useState('');\n  const [draft, setDraft] = useState();\n\n  useEffect(() => {\n    loadEditorConfig(editor, setEditor);\n  }, []);\n\n  useEffect(() => {\n    setRenderedDescription(marked(snippet.Description));\n  }, [snippet]);\n\n  useEffect(() => {\n    (async () => {\n      let [ok, snippet] = await getSnippet(state);\n      if (ok) {\n        setSnippet(snippet);\n      }\n    })();\n  }, [state.CurrentSnippet]);\n\n  const marginRight = 8;\n  const marginBottom = 8;\n\n  const showEditorDialog = () => {\n    setEditor({ ...editor, show: true });\n    setDraft(snippet2draft(snippet));\n  };\n\n  const applyChange = async () => {\n    let newSnippet = draft2snippet(draft);\n    newSnippet = { ...snippet, ...newSnippet };\n    setSnippet(newSnippet);\n    if (snippet.Description !== newSnippet.Description) {\n      setRenderedDescription(marked(newSnippet.Description));\n    }\n    let [ok, message] = await updateSnippet(newSnippet);\n    toast(\n      ok ? 'Snippet has been updated.' : message,\n      ok ? toastType.success : toastType.error\n    );\n  };\n\n  const toast = (message, type) => {\n    if (type === undefined) {\n      type = toastType.success;\n    }\n    dispatch({\n      type: 'SHOW_TOAST',\n      payload: {\n        message,\n        type,\n        duration: type === toastType.error ? 6000 : 2000,\n      },\n    });\n  };\n\n  const copy = async () => {\n    try {\n      await navigator.clipboard.writeText(snippet.Code);\n      toast('Snippet copied.');\n    } catch (e) {\n      toast(e, toastType.error);\n    }\n  };\n\n  const loadEditorConfig = () => {\n    let theme = localStorage.getItem('theme');\n    if (!theme) {\n      theme = editor.theme;\n    }\n    let fontSize = localStorage.getItem('fontSize');\n    fontSize = parseInt(fontSize);\n    if (!fontSize) {\n      fontSize = editor.fontSize;\n    }\n    setEditor({\n      ...editor,\n      theme,\n      fontSize,\n    });\n  };\n\n  const onChange = (newValue) => {\n    let draft = newValue;\n    localStorage.setItem('editorContent', draft);\n    setDraft(draft);\n  };\n\n  return (\n    <>\n      <div>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={() => {\n            // TODO: delete\n          }}\n          style={{ marginRight, marginBottom }}\n        >\n          Delete Snippet\n        </Button>\n        <Button\n          variant=\"contained\"\n          style={{ marginRight, marginBottom }}\n          onClick={showEditorDialog}\n        >\n          Edit Snippet\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={copy}\n          style={{ marginRight, marginBottom }}\n        >\n          Copy Code\n        </Button>\n      </div>\n      <Paper style={{ padding: 16 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          {snippet.Title}\n        </Typography>\n        <Highlight className={snippet.Language}>{snippet.Code}</Highlight>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: renderedDescription,\n          }}\n        />\n      </Paper>\n      <Dialog\n        fullScreen\n        open={editor.show}\n        onClose={() => {\n          setEditor({ ...editor, show: false });\n        }}\n        TransitionComponent={Transition}\n      >\n        <AppBar\n          position={'relative'}\n          style={{ background: '#fbf1d3', boxShadow: 'none' }}\n        >\n          <Toolbar>\n            <IconButton\n              edge=\"start\"\n              color=\"inherit\"\n              onClick={() => {\n                setEditor({ ...editor, show: false });\n              }}\n              aria-label=\"close\"\n            >\n              <CloseIcon style={{ fill: '#000' }} />\n            </IconButton>\n            <IconButton aria-label=\"save\" color=\"inherit\" onClick={applyChange}>\n              <SaveIcon style={{ fill: '#000' }} />\n            </IconButton>\n          </Toolbar>\n        </AppBar>\n        <AceEditor\n          style={{ width: '100%', height: '100%' }}\n          mode={'markdown'}\n          theme={editor.theme}\n          name={'editor'}\n          onChange={onChange}\n          value={draft}\n          fontSize={editor.fontSize}\n          setOptions={{ useWorker: false }}\n        />\n      </Dialog>\n    </>\n  );\n}\nexport default Snippet;\n","import React, { useState } from 'react';\nconst useSettingForm = (initialState) => {\n  const [setting, setSetting] = useState(initialState);\n\n  const handleInputChange = (event) => {\n    if (event.target.name === 'server' && event.target.value.endsWith('/')) {\n      event.target.value = event.target.value.slice(0, -1);\n    }\n    setSetting({\n      ...setting,\n      [event.target.name]: event.target.value,\n    });\n  };\n  return [setting, setSetting, handleInputChange];\n};\nexport default useSettingForm;\n","import React, { useContext } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { Context } from '../store';\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default function Toast() {\n  const [state, dispatch] = useContext(Context);\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    dispatch({ type: 'CLOSE_TOAST', payload: {} });\n  };\n\n  return (\n    <Snackbar\n      open={state.Toast.open}\n      autoHideDuration={state.Toast.duration}\n      onClose={handleClose}\n    >\n      <Alert onClose={handleClose} severity={state.Toast.type}>\n        {state.Toast.message}\n      </Alert>\n    </Snackbar>\n  );\n}\n","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TopBar from './TopBar';\nimport TagList from './TagList';\nimport SnippetList from './SnippetList';\nimport Snippet from './Snippet';\nimport { style } from '../utils/constant';\nimport useSettingForm from '../hooks/settingForm';\nimport { Context } from '../store';\n\nimport { loadSetting, saveSetting } from '../utils/setting';\nimport { Api, refreshToken } from '../utils/api';\nimport Toast from './Toast';\nimport { toastType } from '../utils/constant';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  content: {\n    padding: theme.spacing(3),\n    marginLeft: style.snippetListWidth,\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nfunction Layout() {\n  const [state, dispatch] = useContext(Context);\n  const [setting, setSetting, handleInputChange] = useSettingForm(\n    state.Setting\n  );\n\n  useEffect(() => {\n    loadSetting(dispatch);\n  }, []);\n\n  // After the state is changed, update setting.\n  useEffect(() => {\n    // TODO: Looks like this useEffect will be called on initialized\n    if (state.Setting.username !== '') {\n      setSetting(state.Setting);\n      Api(state, dispatch);\n    }\n  }, [state.Setting]);\n\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <TopBar />\n      <TagList />\n      <SnippetList />\n      <main className={classes.content}>\n        <Toolbar />\n        <Snippet />\n      </main>\n      <Dialog\n        open={state.SettingDialog}\n        onClose={() => {\n          dispatch({ type: 'SET_SETTING_DIALOG', payload: false });\n        }}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Setting</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Tips: you can use a localhost server.\n          </DialogContentText>\n          <TextField\n            margin=\"dense\"\n            name=\"username\"\n            label=\"Username\"\n            type=\"text\"\n            value={setting.username}\n            onChange={handleInputChange}\n            fullWidth\n          />\n          <TextField\n            margin=\"dense\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            value={setting.password}\n            onChange={handleInputChange}\n            fullWidth\n          />\n          <TextField\n            margin=\"dense\"\n            name=\"server\"\n            label=\"Server Address\"\n            type=\"url\"\n            value={setting.server}\n            onChange={handleInputChange}\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={async () => {\n              let [success, message, _] = await refreshToken(\n                { Setting: setting },\n                dispatch\n              );\n              let type = toastType.error;\n              if (success) {\n                message = 'Your setting is okay.';\n                type = toastType.success;\n              }\n              dispatch({\n                type: 'SHOW_TOAST',\n                payload: {\n                  message,\n                  type,\n                  duration: success ? 3000 : 6000,\n                },\n              });\n            }}\n            color=\"primary\"\n          >\n            Test\n          </Button>\n          <Button\n            onClick={() => {\n              saveSetting(setting, dispatch);\n              dispatch({\n                type: 'SHOW_TOAST',\n                payload: {\n                  message: 'Your settings have been saved in local storage.',\n                  type: toastType.success,\n                  duration: 3000,\n                },\n              });\n            }}\n            color=\"primary\"\n          >\n            Save\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Toast />\n    </div>\n  );\n}\n\nexport default Layout;\n","export function loadSetting(dispatch) {\n  let username = localStorage.getItem('username');\n  let password = localStorage.getItem('password');\n  let server = localStorage.getItem('server');\n  if (!username || !password || !server) {\n    dispatch({ type: 'SET_SETTING_DIALOG', payload: true });\n  } else {\n    dispatch({\n      type: 'SET_SETTING',\n      payload: {\n        username,\n        password,\n        server,\n      },\n    });\n  }\n}\n\nexport function saveSetting(setting, dispatch) {\n  // Close the setting dialog.\n  dispatch({ type: 'SET_SETTING_DIALOG', payload: false });\n  // Save to local storage\n  for (const [key, value] of Object.entries(setting)) {\n    localStorage.setItem(key, value);\n  }\n  // Save to global state\n  dispatch({ type: 'SET_SETTING', payload: setting });\n}\n","import React from 'react';\n\nconst NotFoundView = () => {\n  return <div>404</div>;\n};\n\nexport default NotFoundView;\n","import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport Layout from './components/Layout';\nimport NotFoundView from './views/NotFoundView';\nimport Snippet from './components/Snippet';\n\nconst routes = [\n  {\n    path: '/',\n    element: <Layout />,\n    children: [\n      { path: '404', element: <NotFoundView /> },\n      { path: '/', element: <Snippet /> },\n      { path: '*', element: <Navigate to=\"/404\" /> },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\nimport { useEffect } from 'react';\nimport { useRoutes } from 'react-router-dom';\n\nimport { ThemeProvider } from '@material-ui/core';\nimport { mainTheme } from './theme';\nimport routes from './routes';\nimport Store from './store';\n\nconst App = () => {\n  useEffect(() => {\n    const e = document.getElementById('ipl-progress-indicator');\n    if (e) {\n      e.classList.add('available');\n      setTimeout(() => {\n        e.outerHTML = '';\n      }, 20);\n    }\n  }, []);\n  const routing = useRoutes(routes);\n  return (\n    <Store>\n      <ThemeProvider theme={mainTheme}>{routing}</ThemeProvider>\n    </Store>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <BrowserRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}